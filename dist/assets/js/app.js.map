{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/assets/js/app/app.js","app.js","src/assets/js/app/gpgpu.js","src/assets/js/libs/stats.min.js","src/assets/js/main.js","src/assets/js/utils/loader.js","src/assets/js/utils/three-utils.js","src/assets/js/utils/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_utils","_threeUtils","_loader","_loader2","_gpgpu","_gpgpu2","Stats","scope","scene","camera","renderer","mousePos","gpgpu","mesh","tOriginalPositions","tPositions","tData","simulationMaterial","renderMaterial","stats","App","this","THREE","Vector3","createBaseElements","addListeners","manifest","file","id","loadAssets","assets","createScene","handleResize","update","callback","loader","load","width","window","innerWidth","height","innerHeight","Scene","PerspectiveCamera","position","z","WebGLRenderer","setClearColor","setSize","document","body","appendChild","domElement","texSize","format","RGBAFormat","channels","RGBFormat","len","data1","Float32Array","data2","size","randomRange","randomInt","getDataTexture","ShaderMaterial","uniforms","type","curlScale","amplitude","time","mousePosition","forceStrength","rotation","vertexShader","fragmentShader","map","textures","particle","pointSize","transparent","blending","AdditiveBlending","depthTest","depthWrite","vertices","_i","Math","floor","geo","BufferGeometry","addAttribute","BufferAttribute","Points","add","addEventListener","handleMouseMove","removeEventListener","style","left","bottom","aspect","updateProjectionMatrix","x","clientX","y","clientY","getMouseWorldPos","render","requestAnimationFrame","removeListeners","../libs/stats.min","../utils/loader","../utils/three-utils","../utils/utils","./gpgpu","2","rtt1","rtt2","flip","GPGPU","_ref","_ref$size","undefined","_ref$format","gl","getContext","getExtension","alert","getParameter","MAX_VERTEX_TEXTURE_IMAGE_UNITS","OrthographicCamera","Mesh","PlaneBufferGeometry","options","minFilter","NearestFilter","magFilter","FloatType","stencil","WebGLRenderTarget","clone","propertyName","texture","3","_typeof","Symbol","iterator","constructor","b","createElement","cssText","c","d","innerHTML","toUpperCase","m","children","display","p","firstChild","min","q","self","performance","now","bind","Date","k","preventDefault","Infinity","v","A","B","g","w","C","D","memory","h","E","F","REVISION","setMode","begin","end","max","textContent","round","usedJSHeapSize","jsHeapSizeLimit","4","_app","_app2","./app/app","5","interval","loadInfo","files","numFiles","numLoaded","progressCallback","loadCallback","loadCheck","done","Loader","geometry","fonts","data","checkLoaded","onLoadCallback","onProgressCallback","forEach","fileObj","toString","indexOf","loadTexture","isData","loadDataJSON","isFont","loadFontJSON","loadGeometryJSON","loadCollada","loadCubemap","setInterval","xhr","XMLHttpRequest","overrideMimeType","open","onreadystatechange","readyState","status","JSON","parse","responseText","send","JSONLoader","loaded","total","FontLoader","font","ColladaLoader","collada","TextureLoader","CubeTextureLoader","clearInterval","info","parseInt","6","degreesToRads","degrees","PI","radsToDegrees","radians","tex","DataTexture","generateMipmaps","needsUpdate","createPlane","color","PlaneGeometry","MeshBasicMaterial","random","rotateAroundWorldAxisX","object","matrix","Matrix4","makeRotationX","multiply","setFromRotationMatrix","rotateAroundWorldAxisY","makeRotationY","rotateAroundWorldAxisZ","makeRotationZ","rotateAroundWorldAxis","axis","rotWorldMatrix","makeRotationAxis","normalize","setScale","scale","set","disposeOfMesh","parent","remove","dispose","material","disposeOfChildren","removeAllChildren","object3d","moveTowards","easing","moveVectorTowards","v1","v2","rotateTowards","updateCameraMatrices","updateMatrix","updateMatrixWorld","matrixWorldInverse","getInverse","matrixWorld","meshIsInView","frustum","Frustum","setFromMatrix","multiplyMatrices","projectionMatrix","intersectsObject","getMouseIntersection","mouse","objects","raycaster","Raycaster","setFromCamera","intersections","intersectObjects","objectWorldPositionToScreen","widthHalf","heightHalf","vector","setFromMatrixPosition","project","objectWorldPositionToScreenAlt","pos","projScreenMat","applyMatrix4","worldToScreen","copy","screenToWorld","unproject","dir","sub","distance","multiplyScalar","screenToWorldAtZ","planeZ","Plane","ray","intersectPlane","mouseScreenPos","vec","getMouseWorldPosAtZ","pickingRay","getEdges","edge","hash","keys","geometry2","thresholdDot","cos","degToRad","sortFunction","Geometry","fromBufferGeometry","mergeVertices","computeFaceNormals","faces","facesOriginal","face","j","sort","vert1","vert2","face1","face2","edges","normal","dot","push","vertex1","vertex2","faceIndex1","faceIndex2","addFragmentFogInjections","lines","split","_i2","ShaderChunk","join","pointOnSphere","a1","a2","sin","getPointsOnSphere","pts","pt","_i3","getPointsWithinSphere","maxRadius","_i4","getPointsOnSphereEvenly","inc","sqrt","off","phi","getRandomVector3","addRandomVector3","rotationInDegrees","Euler","order","loadJSONGeometry","geometriesById","geometries","loadTextures","texturesById","crossOrigin","setTextureWrapping","wrapping","_i5","wrapS","wrapT","setTextureMipmapping","mipmapping","_i6","setTextureMinMagFilters","_i7","injectShaderCode","original","injection","replacement","_i8","replace","logVector","console","log","logProgramInfo","program","result","attributes","attributeCount","uniformCount","activeUniforms","getProgramParameter","ACTIVE_UNIFORMS","activeAttributes","ACTIVE_ATTRIBUTES","enums","35664","35665","35666","35667","35668","35669","35670","35671","35672","35673","35674","35675","35676","35678","35680","5120","5121","5122","5123","5124","5125","5126","_i9","uniform","getActiveUniform","typeName","attribute","getActiveAttrib","axisUp","axisDown","axisLeft","axisRight","axisForward","axisBackward","7","classNames","content","el","name","classList","lerp","norm","sourceMin","sourceMax","destMin","destMax","clamp","p0","p1","dx","dy","distanceXY","x0","y0","x1","y1","circleCollision","c0","c1","radius","circlePointCollision","circle","pointInRect","rect","inRange","rangeIntersect","min0","max0","min1","max1","rectIntersect","r0","r1","angleBetweenPoints","p2","atan2","roundToPlaces","places","mult","pow","roundNearest","nearest","quadraticBezier","pFinal","cubicBezier","p3","multicurve","points","context","midx","midy","moveTo","quadraticCurveTo","stringify","isArray","arg","shuffleArray","array","currentIndex","temporaryValue","randomIndex","thinOutArray","newArray","randomItemFromArray","arrayRestrictedToRangeZ","minZ","maxZ","extractKeyFromArray","repeat","params","intervals","delay","startDelay","doStuff","setTimeout","isOpera","opera","navigator","userAgent","isFirefox","InstallTrigger","isSafari","HTMLElement","isChrome","chrome","isIE","documentMode","isMac","platform","toLowerCase","isWindows","hasWebGL","WebGLRenderingContext","canvas","names","getVideoType","dispatchEvent","eventName","config","event","createEvent","initCustomEvent","CustomEvent","detail","setCursor","cursor","element","getParameterByName","regex","RegExp","results","exec","location","search","decodeURIComponent"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,GCAA,YCCszB,SAASK,GAAuBC,GAAK,MAAOA,IAAKA,EAAIC,WAAWD,GAAKE,UAAQF,GAAM,QAASG,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAt+BC,OAAOC,eAAed,EAAQ,cAAce,OAAM,GAAO,IAAIC,GAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIxB,GAAE,EAAEA,EAAEwB,EAAMjB,OAAOP,IAAI,CAAC,GAAIyB,GAAWD,EAAMxB,EAAGyB,GAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,SAAUF,KAAWA,EAAWG,UAAS,GAAKV,OAAOC,eAAeI,EAAOE,EAAWI,IAAIJ,IAAc,MAAO,UAAST,EAAYc,EAAWC,GAAuI,MAAvHD,IAAWR,EAAiBN,EAAYgB,UAAUF,GAAeC,GAAYT,EAAiBN,EAAYe,GAAoBf,MDCljBiB,EAAAlC,EAAA,kBACAmC,EAAAnC,EAAA,wBACAoC,EAAApC,EAAA,mBCHosBqC,EAAS1B,EAAuByB,GDIpuBE,EAAAtC,EAAA,WCJ+wBuC,EAAQ5B,EAAuB2B,GDMxyBE,EAAAxC,EAAU,qBACFyC,EAAQ,OAAAC,EAAA,OAAtBC,EAEI,OAAAC,EACA,OAEAC,EAAA,OACAC,EAAA,OAAAC,EACA,OAAAC,EAEA,OAAAC,EACA,OAAAC,EAAA,OACAC,EACA,OAAAC,EACA,OAAAC,EAAA,OACAC,EAAA,WACA,QAAAA,KAEiBvC,EAEjBwC,KAAAD,GAAAb,EACAc,KAAAV,EAAA,GAAAW,OAAAC,QACY,EAAA,EAER,IAAAF,KAAWG,qBAAwBH,KAEnCI,cAIA,IAAMC,KACDC,KAAK,0BAA2BC,GAAG,YAExCP,MAAKQ,WAAWH,EAAU,SAASI,GAC/BvB,EAAMwB,YAAYD,GAClBvB,EAAMyB,eACNzB,EAAM0B,WCxCm1D,MAD3rD7C,GAAagC,IAAMxB,IAAI,aAAaT,MAAM,SD6CrMuC,EAAUQ,GAEjB,GAAMC,GAAS,GAAAhC,GAAAA,UAEfgC,GAAOC,KAAKV,EAAU,SAAAI,GACK,kBAAbI,IAENA,EAASJ,QCpDoWlC,IAAI,qBAAqBT,MAAM,WD2DpZ,GAAIkD,GAAQC,OAAOC,WACfC,EAASF,OAAOG,WAEpBjC,GAAQ,GAAIc,OAAMoB,MAClBjC,EAAS,GAAIa,OAAMqB,kBAAkB,GAAIN,EAAQG,EAAQ,GAAK,KAC9D/B,EAAOmC,SAASC,EAAI,IAEpBnC,EAAW,GAAIY,OAAMwB,cACrBpC,EAASqC,cAAc,QAAU,GACjCrC,EAASsC,QAAQX,EAAOG,GACxBS,SAASC,KAAKC,YAAYzC,EAAS0C,eCrEwsBxD,IAAI,cAAcT,MAAM,SDwE3vB2C,GAUR,IAAK,GARDuB,GAAU,IACVC,EAAShC,MAAMiC,WACfC,EAAWF,IAAWhC,MAAMmC,UAAY,EAAI,EAC5CC,EAAML,EAAUA,EAAUG,EAC1BG,EAAQ,GAAIC,cAAaF,GACzBG,EAAQ,GAAID,cAAaF,GACzBI,EAAO,GAEF/F,EAAI,EAAGA,EAAI2F,EAAK3F,GAAKyF,EAE1BG,EAAM5F,EAAI,IAAK,EAAAiC,EAAA+D,cAAaD,EAAMA,GAClCH,EAAM5F,EAAI,IAAK,EAAAiC,EAAA+D,cAAaD,EAAMA,GAClCH,EAAM5F,EAAI,IAAK,EAAAiC,EAAA+D,cAAaD,EAAMA,GAClCH,EAAM5F,EAAI,GAAK,EAEf8F,EAAM9F,EAAI,IAAK,EAAAiC,EAAA+D,aAAY,GAAK,IAChCF,EAAM9F,EAAI,IAAK,EAAAiC,EAAAgE,WAAU,EAAG,GAC5BH,EAAM9F,EAAI,GAAK,EACf8F,EAAM9F,EAAI,GAAK,CAGnB+C,IAAqB,EAAAb,EAAAgE,gBAAeN,EAAON,EAASA,EAASC,GAC7DvC,GAAa,EAAAd,EAAAgE,gBAAeN,EAAON,EAASA,EAASC,GACrDtC,GAAQ,EAAAf,EAAAgE,gBAAeJ,EAAOR,EAASA,EAASC,GAEhDrC,EAAqB,GAAIK,OAAM4C,gBAC3BC,UACIrD,oBAAqBsD,KAAK,IAAKjF,MAAM2B,GACrCC,YAAaqD,KAAK,IAAKjF,MAAM4B,GAC7BC,OAAQoD,KAAK,IAAKjF,MAAM6B,GACxBqD,WAAYD,KAAK,IAAKjF,MAAM,KAC5BmF,WAAYF,KAAK,IAAKjF,MAAM,KAC5BoF,MAAOH,KAAK,IAAKjF,MAAM,GACvBqF,eAAgBJ,KAAK,KAAMjF,MAAMwB,GACjC8D,eAAgBL,KAAK,IAAKjF,MAAM,KAChCuF,UAAWN,KAAK,IAAKjF,MAAM,MAE/BwF,aAAc,2KAMgBC,eAAW,w3KAe7C1D,EAAA,GAAAI,OAAA4C,gBAAAC,UAAArD,oBAAAsD,KAAA,IAAAjF,MAAA2B,GAAAC,YAAAqD,KAAA,IAAAjF,MAAA4B,GAAAC,OAAAoD,KAAA,IAAAjF,MAAA6B,GAAA6D,KAAAT,KAAA,IAAAjF,MAAA2C,EAAAgD,SAAAC,UAAAC,WAAAZ,KAAA,IAAAjF,MAAA,GAAAkE,SAAAe,KAAA,IAAAjF,MAAAkE,IAAAsB,aAAA,8dAAAC,eAAA,ixCAAAK,aAAA,EAAAC,SAAA5D,MAAA6D,iBAAAC,WAAA,EAAAC,YAAA,IACA3B,EAAML,EAAUA,CAEhB,KAAI,GADEiC,GAAW,GAAI1B,cAAmB,EAANF,GAC1B6B,EAAI,EAAGA,EAAI7B,EAAK6B,IAEpBD,EAAa,EAAJC,EAAQ,GAAMA,EAAIlC,EAAWA,EACtCiC,EAAa,EAAJC,EAAQ,GAAKC,KAAKC,MAAMF,EAAIlC,GAAWA,CAGpD,IAAIqC,GAAM,GAAIpE,OAAMqE,cACpBD,GAAIE,aAAa,WAAY,GAAItE,OAAMuE,gBAAgBP,EAAU,IAEjEzE,EAAO,GAAIS,OAAMwE,OAAOJ,EAAKxE,GAC7BV,EAAMuF,IAAIlF,GAEVD,EAAQ,GAAAP,GAAAA,YACJK,SAAUA,EACVO,mBAAoBA,EACpBC,eAAgBA,EAChB4C,KAAMT,EACNC,OAAQA,OCvJsc1D,IAAI,eAAeT,MAAM,WD6J3emD,OAAO0D,iBAAiB,SAAU3E,KAAKW,cAAc,GACrDM,OAAO0D,iBAAiB,oBAAqB3E,KAAKW,cAAc,GAChEM,OAAO0D,iBAAiB,YAAa3E,KAAK4E,iBAAiB,MC/J2oBrG,IAAI,kBAAkBT,MAAM,WDoKluBmD,OAAO4D,oBAAoB,SAAU7E,KAAKW,cAC1CM,OAAO4D,oBAAoB,oBAAqB7E,KAAKW,cACrDM,OAAO4D,oBAAoB,YAAa7E,KAAK4E,oBCtK04BrG,IAAI,WAAWT,MAAM,WD2K58BgC,EAAQ,GAAIb,GACZa,EAAMiC,WAAW+C,MAAMvD,SAAW,WAClCzB,EAAMiC,WAAW+C,MAAMC,KAAO,MAC9BjF,EAAMiC,WAAW+C,MAAME,OAAS,MAChCpD,SAASC,KAAKC,YAAYhC,EAAMiC,eC/KmnCxD,IAAI,eAAeT,MAAM,SDkLnqC7B,GAET,GAAI+E,GAAQC,OAAOC,WACfC,EAASF,OAAOG,WAEpBhC,GAAO6F,OAASjE,EAAQG,EAExB/B,EAAO8F,yBACP7F,EAASsC,QAAQX,EAAOG,MC1Li0C5C,IAAI,kBAAkBT,MAAM,SD6Lz2C7B,GAEZqD,EAAS6F,EAAMlJ,EAAEmJ,QAAUnE,OAAOC,WAAe,EAAI,EACrD5B,EAAS+F,EAA2C,IAAnCpJ,EAAEqJ,QAAUrE,OAAOG,aAAoB,KChMu7C7C,IAAI,SAAST,MAAM,WDqMlgD8B,EAAmBkD,SAASI,KAAKpF,OAAS,KAC1C8B,EAAmBkD,SAASK,cAAcrF,OAAQ,EAAAc,EAAA2G,kBAAiBjG,EAAUF,GAE7EG,EAAMqB,OAAO,cAEbvB,EAASmG,OAAOrG,EAAOC,GAEpBU,GAECA,EAAMc,SAGV6E,sBAAsBvG,EAAM0B,WCjNmwDrC,IAAI,UAAUT,MAAM,WDsNnzD4H,sBCtNo2D3F,IAAQhD,GAAAA,WDsB/1DgD,ICpBlB4F,oBAAoB,EAAEC,kBAAkB,EAAEC,uBAAuB,EAAEC,iBAAiB,EAAEC,UAAU,IAAIC,GAAG,SAASvJ,EAAQU,EAAOJ,GCLlI,YDMokB,SAASS,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAjqBC,OAAOC,eAAed,EAAQ,cAAce,OAAM,GAAO,IAAIC,GAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIxB,GAAE,EAAEA,EAAEwB,EAAMjB,OAAOP,IAAI,CAAC,GAAIyB,GAAWD,EAAMxB,EAAGyB,GAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,SAAUF,KAAWA,EAAWG,UAAS,GAAKV,OAAOC,eAAeI,EAAOE,EAAWI,IAAIJ,IAAc,MAAO,UAAST,EAAYc,EAAWC,GAAuI,MAAvHD,IAAWR,EAAiBN,EAAYgB,UAAUF,GAAeC,GAAYT,EAAiBN,EAAYe,GAAoBf,MCJ9iByB,EAAA,OACAC,EAAA,OACAI,EAAA,OACAyG,EAAA,OACAC,EAAA,OACAC,GAAO,EAEUC,EDHwxB,WCKzyB,QAAAA,GAAAC,GACA,GADahH,GACbgH,EADahH,SAAUO,EACvByG,EADuBzG,mBAAoBC,EAC3CwG,EAD2CxG,eAC3CyG,EAAAD,EAD2D5D,KAAAA,EAC3D8D,SAAAD,EADkE,IAClEA,EAAAE,EAAAH,EADuEpE,OAAAA,EACvEsE,SAAAC,EADgFvG,MAAMmC,UACtFoE,CAAAhJ,GAAAwC,KAAAoG,EACI,IAAMK,GAAKpH,EAASqH,YAEpB,KAAID,EAAGE,aAAa,qBAGhB,WADAC,OAAM,mDAIV,IAA0D,IAAvDH,EAAGI,aAAaJ,EAAGK,gCAGlB,WADAF,OAAM,yCAIVxH,GAAS,GAAIa,OAAM8G,yBAAyB,GAAK,SAAW,EAAG,GAE/D5H,EAAQ,GAAIc,OAAMoB,MAElB7B,EAAO,GAAIS,OAAM+G,KAAK,GAAI/G,OAAMgH,oBAAoB,EAAG,GAAIrH,GAC3DT,EAAMuF,IAAIlF,EAEV,IAAM0H,IACFC,UAAWlH,MAAMmH,cACjBC,UAAWpH,MAAMmH,cACjBrE,KAAM9C,MAAMqH,UACZrF,OAAQA,EAERsF,SAAS,EAEbtB,GAAO,GAAIhG,OAAMuH,kBAAkB/E,EAAMA,EAAMyE,GAC/ChB,EAAOD,EAAKwB,QAEZzH,KAAKX,SAAWA,EAChBW,KAAKJ,mBAAqBA,EAC1BI,KAAKH,eAAiBA,EDxCuoB,MAA1e9B,GAAaqI,IAAQ7H,IAAI,SAAST,MAAM,SC2CxN4J,GAEHA,EAAeA,GAAgB,aAE5BvB,GAECnG,KAAKX,SAASmG,OAAOrG,EAAOC,EAAQ8G,GAAM,GAC1ClG,KAAKH,eAAeiD,SAAS4E,GAAc5J,MAAQoI,EAAKyB,QACxD3H,KAAKJ,mBAAmBkD,SAAS4E,GAAc5J,MAAQoI,EAAKyB,UAI5D3H,KAAKX,SAASmG,OAAOrG,EAAOC,EAAQ6G,GAAM,GAC1CjG,KAAKH,eAAeiD,SAAS4E,GAAc5J,MAAQmI,EAAK0B,QACxD3H,KAAKJ,mBAAmBkD,SAAS4E,GAAc5J,MAAQmI,EAAK0B,SAGhExB,GAAQA,MD5D4pBC,IAAUrJ,GAAAA,WCEjqBqJ,ODAfwB,GAAG,SAASnL,EAAQU,EAAOJ,GACjC,YAAa,IAAI8K,GAAwB,kBAATC,SAA8C,gBAAlBA,QAAOC,SAAoB,SAAS1K,GAAK,aAAcA,IAAM,SAASA,GAAK,MAAOA,IAAqB,kBAATyK,SAAqBzK,EAAI2K,cAAcF,OAAO,eAAgBzK,IETpN4B,EAAM,WAAW,QAAStC,GAAEH,EAAEP,EAAEgM,GAAwD,MAArDzL,GAAEoF,SAASsG,cAAc1L,GAAGA,EAAE+D,GAAGtE,EAAEO,EAAEsI,MAAMqD,QAAQF,EAASzL,EAAE,QAASM,GAAEN,EAAEP,EAAEgM,GAAG,GAAIG,GAAEzL,EAAE,MAAMH,EAAE,kDAAkDyL,GAAGI,EAAE1L,EAAE,MAAMH,EAAE,OAAO,gGAAgGP,EAA6H,KAA1HoM,EAAEC,UAAU9L,EAAE+L,cAAcH,EAAEtG,YAAYuG,GAAG7L,EAAEG,EAAE,MAAMH,EAAE,QAAQ,qCAAqCP,GAAGmM,EAAEtG,YAAYtF,GAAOP,EAAE,EAAE,GAAGA,EAAEA,IAAIO,EAAEsF,YAAYnF,EAAE,OAAO,GAAG,2DACvdsL,GAAI,OAAOG,GAAE,QAASI,GAAEhM,GAAG,IAAI,GAAIyL,GAAEG,EAAEK,SAASJ,EAAE,EAAEA,EAAEJ,EAAEhL,OAAOoL,IAAIJ,EAAEI,GAAGvD,MAAM4D,QAAQL,IAAI7L,EAAE,QAAQ,MAAOL,GAAEK,EAAE,QAASmM,GAAEnM,EAAEyL,GAAGzL,EAAEsF,YAAYtF,EAAEoM,YAAY9D,MAAM3D,OAAOgD,KAAK0E,IAAI,GAAG,GAAG,GAAGZ,GAAG,KAAK,GAAIa,GAAEC,KAAKC,aAAaD,KAAKC,YAAYC,IAAIF,KAAKC,YAAYC,IAAIC,KAAKF,aAAaG,KAAKF,IAAIG,EAAEN,IAAI1M,EAAEgN,EAAElN,EAAE,EAAEC,EAAE,EAAEiM,EAAEzL,EAAE,MAAM,QAAQ,wCAAyCyL,GAAEzD,iBAAiB,YAAY,SAASnI,GAAGA,EAAE6M,iBAAiBb,IAAIrM,EAAEiM,EAAEK,SAASxL,UAAS,EAAI,IAAIoL,GAAE,EAAE9L,EAAE+M,EAAAA,EAASC,EAAE,EAAEtB,EAAEnL,EAAE,MAAM,OAAO,QAChf0M,EAAEvB,EAAEQ,SAAS,GAAGgB,EAAExB,EAAEQ,SAAS,EAAGL,GAAEtG,YAAYmG,EAAG,IAAIyB,GAAE,EAAEC,EAAEL,EAAAA,EAASnE,EAAE,EAAE8C,EAAEnL,EAAE,KAAK,OAAO,QAAQ8M,EAAE3B,EAAEQ,SAAS,GAAGoB,EAAE5B,EAAEQ,SAAS,EAAoB,IAAjBL,EAAEtG,YAAYmG,GAAMc,KAAKC,aAAaD,KAAKC,YAAYc,OAAO,CAAC,GAAIC,GAAE,EAAE1E,EAAEiE,EAAAA,EAAS9H,EAAE,EAAEyG,EAAEnL,EAAE,KAAK,OAAO,QAAQkN,EAAE/B,EAAEQ,SAAS,GAAGwB,EAAEhC,EAAEQ,SAAS,EAAGL,GAAEtG,YAAYmG,GAAQ,MAALO,GAAErM,IAAU+N,SAAS,GAAGnI,WAAWqG,EAAE+B,QAAQ3B,EAAE4B,MAAM,WAAWhB,EAAEN,KAAKuB,IAAI,WAAW,GAAI7N,GAAEsM,GAAyG,IAArGY,EAAElN,EAAE4M,EAAEO,EAAExF,KAAK0E,IAAIc,EAAED,GAAGvE,EAAEhB,KAAKmG,IAAInF,EAAEuE,GAAGE,EAAEW,aAAe,EAAFb,GAAK,SAAW,EAAFC,GAAK,KAAO,EAAFxE,GAAK,IAAIwD,EAAEkB,EAAEH,EAAE,KAAKxN,IAAOM,EAAEJ,EAAE,MAAMiM,EAAElE,KAAKqG,MAAM,IAC9ftO,GAAGM,EAAEJ,IAAIG,EAAE4H,KAAK0E,IAAItM,EAAE8L,GAAGkB,EAAEpF,KAAKmG,IAAIf,EAAElB,GAAGmB,EAAEe,YAAYlC,EAAE,SAAS9L,EAAE,IAAIgN,EAAE,IAAIZ,EAAEc,EAAEpB,EAAE,KAAKjM,EAAEI,EAAEN,EAAE,EAAE,SAAS6N,GAAG,CAAC,GAAI9B,GAAEe,YAAYc,OAAOW,eAAerC,EAAEY,YAAYc,OAAOY,eAAgBX,GAAE5F,KAAKqG,MAAM,QAAQvC,GAAG5C,EAAElB,KAAK0E,IAAIxD,EAAE0E,GAAGvI,EAAE2C,KAAKmG,IAAI9I,EAAEuI,GAAGC,EAAEO,YAAYR,EAAE,QAAQ1E,EAAE,IAAI7D,EAAE,IAAImH,EAAEsB,EAAEhC,EAAEG,GAAG,MAAO5L,IAAGoE,OAAO,WAAWwI,EAAEpJ,KAAKqK,QAAS,aAAA,mBAAkBlN,GAAlB,YAAA0K,EAAkB1K,MAASA,EAAOJ,QAAQkC,QFShX0L,GAAG,SAASlO,EAAQU,EAAOJ,GGbjC,YHckF,SAASK,GAAuBC,GAAK,MAAOA,IAAKA,EAAIC,WAAWD,GAAKE,UAAQF,GGZ/J,GAAAuN,GAAAnO,EAAA,aHY+CoO,EAAMzN,EAAuBwN,EGV5EhJ,UAAS+C,iBAAiB,mBAAoB,WAC9B,GAAAkG,GAAAA,aACb,KHUAC,YAAY,IAAIC,GAAG,SAAStO,EAAQU,EAAOJ,GIhB9C,YJiBokB,SAASS,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAjqBC,OAAOC,eAAed,EAAQ,cAAce,OAAM,GAAO,IAAIC,GAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIxB,GAAE,EAAEA,EAAEwB,EAAMjB,OAAOP,IAAI,CAAC,GAAIyB,GAAWD,EAAMxB,EAAGyB,GAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,SAAUF,KAAWA,EAAWG,UAAS,GAAKV,OAAOC,eAAeI,EAAOE,EAAWI,IAAIJ,IAAc,MAAO,UAAST,EAAYc,EAAWC,GAAuI,MAAvHD,IAAWR,EAAiBN,EAAYgB,UAAUF,GAAeC,GAAYT,EAAiBN,EAAYe,GAAoBf,MIf9iBsN,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACArM,EAAA,OACAsM,GAAO,EAEUC,EJIk3B,WIFn4B,QAAAA,KACAjO,EAAAwC,KAAAyL,GACIR,KACAC,GAASzH,YAAaiI,YAAaC,SAAUC,SAC7CL,EAAYvL,KAAK6L,YACjB3M,EAAQc,KJKkO,MARmzBjC,GAAa0N,IAASlN,IAAI,OAAOT,MAAM,SIMnkCuC,EAAUyL,EAAgBC,GAE3BV,EAAmBU,EACnBT,EAAeQ,EAEfX,EAAW9K,EAASpD,OACpBmO,EAAY,CAEZ,IAAMlM,GAAQc,IAEdK,GAAS2L,QAAQ,SAASC,GACgC,mBAAjDrO,OAAOc,UAAUwN,SAASlP,KAAKiP,EAAQ3L,MAErC2L,EAAQ3L,KAAK6L,QAAQ,QAAU,GAAKF,EAAQ3L,KAAK6L,QAAQ,QAAU,GAAKF,EAAQ3L,KAAK6L,QAAQ,SAAW,GAAKF,EAAQ3L,KAAK6L,QAAQ,QAAU,EAE3IjN,EAAMkN,YAAYH,GAEdA,EAAQ3L,KAAK6L,QAAQ,SAAW,EAEjCF,EAAQI,OAEPnN,EAAMoN,aAAaL,GAEfA,EAAQM,OAEZrN,EAAMsN,aAAaP,GAInB/M,EAAMuN,iBAAiBR,GAGvBA,EAAQ3L,KAAK6L,QAAQ,QAAU,GAEnCjN,EAAMwN,YAAYT,GAKtB/M,EAAMyN,YAAYV,KAI1BjB,EAAW4B,YAAY1N,EAAM0B,OAAQ,IAAK,OJjD+xDrC,IAAI,eAAeT,MAAM,SIoDz1DmO,GAET,GAAMY,GAAM,GAAIC,eAChBD,GAAIE,iBAAiB,oBACrBF,EAAIG,KAAK,MAAOf,EAAQ3L,MAAM,GAC9BuM,EAAII,mBAAqB,WACC,IAAnBJ,EAAIK,YAAmC,MAAfL,EAAIM,SAE3BjC,EAAMU,KAAKK,EAAQ1L,IAAM6M,KAAKC,MAAMR,EAAIS,cACxClC,IACAG,MAGRsB,EAAIU,UJjE8oEhP,IAAI,mBAAmBT,MAAM,SIoElqEmO,GAIb,GAAMnL,GAAS,GAAIb,OAAMuN,UACzBvC,GAASgB,EAAQ1L,KAAOkN,OAAO,EAAGC,MAAM,GAExC5M,EAAOC,KAAKkL,EAAQ3L,KAAM,SAASoL,GAC/BT,EAASgB,EAAQ1L,IAAIkN,OAASxC,EAASgB,EAAQ1L,IAAImN,MACnDxC,EAAMQ,SAASO,EAAQ1L,IAAMmL,EAC7BN,IACAG,KACD,SAASsB,GACR5B,EAASgB,EAAQ1L,IAAIkN,OAASZ,EAAIY,OAClCxC,EAASgB,EAAQ1L,IAAImN,MAAQb,EAAIa,WJjF+RnP,IAAI,eAAeT,MAAM,SIqFpVmO,GAET,GAAMnL,GAAS,GAAIb,OAAM0N,UACzB1C,GAASgB,EAAQ1L,KAAOkN,OAAO,EAAGC,MAAM,GAExC5M,EAAOC,KAAKkL,EAAQ3L,KAAM,SAASsN,GAC/B3C,EAASgB,EAAQ1L,IAAIkN,OAASxC,EAASgB,EAAQ1L,IAAImN,MACnDxC,EAAMS,MAAMM,EAAQ1L,IAAMqN,EAC1BxC,IACAG,KACD,SAASsB,GACR5B,EAASgB,EAAQ1L,IAAIkN,OAASZ,EAAIY,OAClCxC,EAASgB,EAAQ1L,IAAImN,MAAQb,EAAIa,WJjGwpBnP,IAAI,cAAcT,MAAM,SIqG7sBmO,GAIR,GAAMnL,GAAS,GAAIb,OAAM4N,aACzB5C,GAASgB,EAAQ1L,KAAOkN,OAAO,EAAGC,MAAM,GAExC5M,EAAOC,KAAKkL,EAAQ3L,KAAM,SAASwN,GAC/B7C,EAASgB,EAAQ1L,IAAIkN,OAASxC,EAASgB,EAAQ1L,IAAImN,MACnDxC,EAAMQ,SAASO,EAAQ1L,IAAMuN,EAC7B1C,IACAG,KACD,SAASsB,GACR5B,EAASgB,EAAQ1L,IAAIkN,OAASZ,EAAIY,OAClCxC,EAASgB,EAAQ1L,IAAImN,MAAQb,EAAIa,WJlHgSnP,IAAI,cAAcT,MAAM,SIsHrVmO,GAIR,GAAMnL,GAAS,GAAIb,OAAM8N,aACzB9C,GAASgB,EAAQ1L,KAAOkN,OAAO,EAAGC,MAAM,GAExC5M,EAAOC,KAAKkL,EAAQ3L,KAAM,SAASqH,GAC/BsD,EAASgB,EAAQ1L,IAAIkN,OAASxC,EAASgB,EAAQ1L,IAAImN,MACnDxC,EAAMzH,SAASwI,EAAQ1L,IAAMoH,EAC7ByD,IACAG,KACD,SAASsB,GACR5B,EAASgB,EAAQ1L,IAAIkN,OAASZ,EAAIY,OAClCxC,EAASgB,EAAQ1L,IAAImN,MAAQb,EAAIa,WJnIgSnP,IAAI,cAAcT,MAAM,SIuIrVmO,GAIR,GAAMnL,GAAS,GAAIb,OAAM+N,iBACzB/C,GAASgB,EAAQ1L,KAAOkN,OAAO,EAAGC,MAAM,GAExC5M,EAAOC,KAAKkL,EAAQ3L,KAAM,SAASqH,GAC/BsD,EAASgB,EAAQ1L,IAAIkN,OAASxC,EAASgB,EAAQ1L,IAAImN,MACnDxC,EAAMzH,SAASwI,EAAQ1L,IAAMoH,EAC7ByD,IACAG,KACD,SAASsB,GACR5B,EAASgB,EAAQ1L,IAAIkN,OAASZ,EAAIY,OAClCxC,EAASgB,EAAQ1L,IAAImN,MAAQb,EAAIa,WJpJoSnP,IAAI,cAAcT,MAAM,WI0J9V0N,GAGAJ,IAAcD,IAEbK,GAAO,EACPyC,cAAcjD,GACd9L,EAAM0B,SAEqB,kBAAjB0K,IAENA,EAAaJ,OJlKxB3M,IAAI,SAAST,MAAM,WI2KhB,GAA+B,kBAArBuN,GACV,CACI,GAAIoC,GAAS,EACTC,EAAQ,CAEZ,KAAI,GAAIQ,KAAQjD,GAEZwC,GAAUU,SAASlD,EAASiD,GAAMT,QAClCC,GAASS,SAASlD,EAASiD,GAAMR,MAKlCrC,IAAkBA,EAAiBoC,EAAQC,OJvLFnP,IAAI,UAAUT,MAAM,WI6LpEmQ,cAAcjD,GAEdA,EAAW,KACXC,EAAW,KACXC,EAAQ,KACRC,EAAW,KACXC,EAAY,KACZC,EAAmB,KACnBC,EAAe,KACfE,EAAO,SJtM0OC,IAAW1O,GAAAA,WIZ/O0O,OJcf2C,GAAG,SAAS3R,EAAQU,EAAOJ,GK3BjC,YASO,SAASsR,GAAcC,GAE1B,MAAOA,GAAU,IAAMnK,KAAKoK,GAGzB,QAASC,GAAcC,GAE1B,MAAiB,KAAVA,EAAgBtK,KAAKoK,GAGzB,QAAS3L,GAAegJ,EAAM5K,EAAOG,EAAQc,GAEhD,GAAIyM,GAAM,GAAIzO,OAAM0O,YAAY/C,EAAM5K,EAAOG,EAAQc,EAAQhC,MAAMqH,UAKnE,OAJAoH,GAAIvH,UAAYlH,MAAMmH,cACtBsH,EAAIrH,UAAYpH,MAAMmH,cACtBsH,EAAIE,iBAAkB,EACtBF,EAAIG,aAAc,EACXH,EAGJ,QAASI,GAAY9N,EAAOG,EAAQ4N,GAEvC,MAAO,IAAI9O,OAAM+G,KACb,GAAI/G,OAAM+O,cAAchO,GAAS,EAAGG,GAAU,GAC9C,GAAIlB,OAAMgP,mBAAmBF,MAAMA,GAAS,YAc7C,QAASrM,GAAYmG,EAAKyB,GAE7B,MAAOzB,GAAM1E,KAAK+K,UAAY5E,EAAMzB,GAGjC,QAASsG,GAAuBC,EAAQX,GAE3C,GAAIY,GAAS,GAAIpP,OAAMqP,OACvBD,GAAOE,cAAcd,GACrBY,EAAOG,SAASJ,EAAOC,QACvBD,EAAOC,OAASA,EAChBD,EAAO/L,SAASoM,sBAAsBL,EAAOC,QAG1C,QAASK,GAAuBN,EAAQX,GAE3C,GAAIY,GAAS,GAAIpP,OAAMqP,OACvBD,GAAOM,cAAclB,GACrBY,EAAOG,SAASJ,EAAOC,QACvBD,EAAOC,OAASA,EAChBD,EAAO/L,SAASoM,sBAAsBL,EAAOC,QAG1C,QAASO,GAAuBR,EAAQX,GAE3C,GAAIY,GAAS,GAAIpP,OAAMqP,OACvBD,GAAOQ,cAAcpB,GACrBY,EAAOG,SAASJ,EAAOC,QACvBD,EAAOC,OAASA,EAChBD,EAAO/L,SAASoM,sBAAsBL,EAAOC,QAG1C,QAASS,GAAsBV,EAAQW,EAAMtB,GAEhD,GAAIuB,GAAiB,GAAI/P,OAAMqP,OAC/BU,GAAeC,iBAAiBF,EAAKG,YAAazB,GAClDuB,EAAeR,SAASJ,EAAOC,QAC/BD,EAAOC,OAASW,EAChBZ,EAAO/L,SAASoM,sBAAsBL,EAAOC,QAG1C,QAASc,GAASf,EAAQgB,GAE7BhB,EAAOgB,MAAMC,IAAID,EAAOA,EAAOA,GAG5B,QAASE,GAAc9Q,GAEtBA,IAEDA,EAAK+Q,QAAQ/Q,EAAK+Q,OAAOC,OAAOhR,GAChCA,EAAKkM,UAAUlM,EAAKkM,SAAS+E,UAC7BjR,EAAKkR,WAEDlR,EAAKkR,SAASlN,KAEbhE,EAAKkR,SAASlN,IAAIiN,UAEtBjR,EAAKkR,SAASD,YAIf,QAASE,GAAkBlI,GAI9B,GAAIA,EAEJ,KAAMA,EAASxL,OAAS,GAEpBqT,EAAc7H,EAAS,IAIxB,QAASmI,GAAkBC,GAE9B,KAAMA,EAASpI,SAASxL,OAAS,GAE7B4T,EAASL,OAAOK,EAASpI,SAAS,IAInC,QAASqI,GAAY1B,EAAQ7N,EAAUwP,GAE1C3B,EAAO7N,SAAS4D,IAAM5D,EAAS4D,EAAIiK,EAAO7N,SAAS4D,GAAK4L,EACxD3B,EAAO7N,SAAS8D,IAAM9D,EAAS8D,EAAI+J,EAAO7N,SAAS8D,GAAK0L,EACxD3B,EAAO7N,SAASC,IAAMD,EAASC,EAAI4N,EAAO7N,SAASC,GAAKuP,EAGrD,QAASC,GAAkBC,EAAIC,EAAIH,GAEtCE,EAAG9L,IAAM+L,EAAG/L,EAAI8L,EAAG9L,GAAK4L,EACxBE,EAAG5L,IAAM6L,EAAG7L,EAAI4L,EAAG5L,GAAK0L,EACxBE,EAAGzP,IAAM0P,EAAG1P,EAAIyP,EAAGzP,GAAKuP,EAGrB,QAASI,GAAc/B,EAAQ/L,EAAU0N,GAE5C3B,EAAO/L,SAAS8B,IAAM9B,EAAS8B,EAAIiK,EAAO/L,SAAS8B,GAAK4L,EACxD3B,EAAO/L,SAASgC,IAAMhC,EAASgC,EAAI+J,EAAO/L,SAASgC,GAAK0L,EACxD3B,EAAO/L,SAAS7B,IAAM6B,EAAS7B,EAAI4N,EAAO/L,SAAS7B,GAAKuP,EAGrD,QAASK,GAAqBhS,GAEjCA,EAAOiS,eACPjS,EAAOkS,oBACPlS,EAAOmS,mBAAmBC,WAAWpS,EAAOqS,aAGzC,QAASC,GAAalS,EAAMJ,EAAQuS,GASvC,MAPAA,GAAUA,GAAW,GAAI1R,OAAM2R,QAC/BR,EAAqBhS,GAErBI,EAAK6R,eACL7R,EAAK8R,oBAELK,EAAQE,eAAe,GAAI5R,OAAMqP,SAAUwC,iBAAkB1S,EAAO2S,iBAAkB3S,EAAOmS,qBACtFI,EAAQK,iBAAiBxS,GAG7B,QAASyS,GAAqBC,EAAO9S,EAAQ+S,EAASC,GAEzDA,EAAYA,GAAa,GAAInS,OAAMoS,UAEnCD,EAAUE,cAAcJ,EAAO9S,EAC/B,IAAImT,GAAgBH,EAAUI,iBAAiBL,EAC/C,OAAOI,GAActV,OAAS,EAAIsV,EAAc,GAAK,KAGlD,QAASE,GAA4BrD,EAAQhQ,GAEhDgS,EAAqBhS,GACrBgQ,EAAOkC,mBAEP,IAAItQ,GAAQC,OAAOC,WAAYC,EAASF,OAAOG,YAC3CsR,EAAY1R,EAAQ,EAAG2R,EAAaxR,EAAS,EAC7CyR,GAAS,GAAI3S,OAAMC,SAAU2S,sBAAsBzD,EAAOqC,YAG9D,OADAmB,GAAOE,QAAQ1T,IAEX+F,EAAGyN,EAAOzN,EAAIuN,EAAaA,EAAY,EACvCrN,IAAIuN,EAAOvN,EAAIsN,GAAcA,EAAa,GAI3C,QAASI,GAA+B3D,EAAQhQ,GAEnDgS,EAAqBhS,GACrBgQ,EAAOkC,mBAEP,IAAItQ,GAAQC,OAAOC,WAAYC,EAASF,OAAOG,YAC3C4R,GAAM,GAAI/S,OAAMC,SAAU2S,sBAAsBzD,EAAOqC,aACvDwB,EAAgB,GAAIhT,OAAMqP,OAO1B,OALA2D,GAAcnB,iBAAiB1S,EAAO2S,iBAAkB3S,EAAOmS,oBAC/DyB,EAAIE,aAAaD,IAKb9N,GAAK6N,EAAI7N,EAAI,GAAKnE,EAAQ,EAAK,EAC/BqE,IAAM2N,EAAI3N,EAAI,GAAKlE,EAAS,EAAK,GAItC,QAASgS,GAAc5R,EAAUnC,GAEpCgS,EAAqBhS,EAErB,IAAI4B,GAAQC,OAAOC,WAAYC,EAASF,OAAOG,YAC3CsR,EAAY1R,EAAQ,EAAG2R,EAAaxR,EAAS,EAC7CyR,GAAS,GAAI3S,OAAMC,SAAUkT,KAAK7R,EAGtC,OADAqR,GAAOE,QAAQ1T,IAEX+F,EAAGyN,EAAOzN,EAAIuN,EAAaA,EAAY,EACvCrN,IAAIuN,EAAOvN,EAAIsN,GAAcA,EAAa,GAQ3C,QAASU,GAAc9R,EAAUnC,GAEpCgS,EAAqBhS,EAErB,IAAI+F,GAAM5D,EAAS4D,EAAIlE,OAAOC,WAAe,EAAI,EAC7CmE,EAA4C,IAApC9D,EAAS8D,EAAIpE,OAAOG,aAAoB,EAChDwR,EAAS,GAAI3S,OAAMC,QAAQiF,EAAGE,EAAG,GAErCuN,GAAOU,UAAUlU,EAEjB,IAAImU,GAAMX,EAAOY,IAAKpU,EAAOmC,UAAW2O,YACpCuD,GAAarU,EAAOmC,SAASC,EAAI+R,EAAI/R,CAEzC,OAAOpC,GAAOmC,SAASkG,QAAQ/C,IAAK6O,EAAIG,eAAgBD,IAGrD,QAASE,GAAiBpS,EAAUC,EAAGpC,GAW1C,GAAI+F,GAAM5D,EAAS4D,EAAIlE,OAAOC,WAAe,EAAI,EAC7CmE,EAA4C,IAApC9D,EAAS8D,EAAIpE,OAAOG,aAAoB,EAChDwS,EAAS,GAAI3T,OAAM4T,MAAM,GAAI5T,OAAMC,QAAQ,EAAG,EAAG,GAAIsB,GACrDoR,EAAS,GAAI3S,OAAMC,QAAQiF,EAAGE,EAAG,IACjC+M,EAAY,GAAInS,OAAMoS,UACtBW,EAAA,MAKJ,OAFAZ,GAAUE,cAAcM,EAAQxT,GAChC4T,EAAMZ,EAAU0B,IAAIC,eAAeH,GAIhC,QAASrO,GAAiByO,EAAgB5U,GAG7C,GAAI6U,GAAMD,EAAevM,QAAQ6L,UAAUlU,GACvCmU,EAAMU,EAAIT,IAAKpU,EAAOmC,UAAW2O,YACjCuD,GAAarU,EAAOmC,SAASC,EAAI+R,EAAI/R,CACzC,OAAOpC,GAAOmC,SAASkG,QAAQ/C,IAAK6O,EAAIG,eAAgBD,IAGrD,QAASS,GAAoBF,EAAgB5U,EAAQoC,GAExD,GAAIoS,GAAS,GAAI3T,OAAM4T,MAAM,GAAI5T,OAAMC,QAAQ,EAAG,EAAG,GAAIsB,GAErDyS,EAAMD,EACN5B,EAAY,GAAInS,OAAMoS,SAC1BD,GAAU+B,WAAWF,EAAK7U,EAC1B,IAAI4T,GAAMZ,EAAU0B,IAAIC,eAAeH,EACvC,OAAOZ,GAGJ,QAASoB,GAAS5U,GAErB,GAAI6U,IAAS,EAAG,GACZC,IACAC,OAAS,IAAK,IAAK,KACnBC,UACAC,aAAetQ,KAAKuQ,IAAKzU,MAAMkE,KAAKwQ,SAAU,GAElD,IAAIC,GAAe,SAAWpY,EAAGyL,GAAM,MAAOzL,GAAIyL,EAE7CzI,GAAKkM,mBAAoBzL,OAAMqE,gBAChCkQ,UAAY,GAAIvU,OAAM4U,SACtBL,UAAUM,mBAAoBtV,EAAKkM,WAEnC8I,UAAYhV,EAAKkM,SAASjE,QAE9B+M,UAAUO,gBACVP,UAAUQ,oBAOV,KAAM,GALF/Q,GAAWuQ,UAAUvQ,SACrBgR,EAAQT,UAAUS,MAClBC,EAAgB1V,EAAKkM,SAASuJ,MAC9B1W,EAAA,OAEM2F,EAAI,EAAGpH,EAAImY,EAAMhY,OAAQiH,EAAIpH,EAAGoH,IAItC,IAAM,GAFFiR,GAAOF,EAAO/Q,GAERkR,EAAI,EAAGA,EAAI,EAAGA,IAEpBf,EAAM,GAAMc,EAAMZ,KAAMa,IACxBf,EAAM,GAAMc,EAAMZ,MAAQa,EAAI,GAAM,IACpCf,EAAKgB,KAAMT,GAEXrW,EAAM8V,EAAKnI,WAEU3F,SAAhB+N,EAAM/V,GACP+V,EAAM/V,IAAU+W,MAAOjB,EAAM,GAAKkB,MAAOlB,EAAM,GAAKmB,MAAOtR,EAAGuR,MAAOlP,QAErE+N,EAAM/V,GAAMkX,MAAQvR,CAKhC,IAAIwR,KAEJ,KAAMnX,IAAO+V,GAAO,CAChB,GAAIvK,GAAIuK,EAAM/V,IACGgI,SAAZwD,EAAE0L,OAAuBR,EAAOlL,EAAEyL,OAAQG,OAAOC,IAAKX,EAAOlL,EAAE0L,OAAQE,SAAYlB,eAEpFiB,EAAMG,MACFC,QAAQ7R,EAAU8F,EAAEuL,OACpBS,QAAQ9R,EAAU8F,EAAEwL,OAGpBC,MAAMN,EAAenL,EAAEyL,OACvBC,MAAMP,EAAenL,EAAE0L,OACvBO,WAAYjM,EAAEyL,MACdS,WAAYlM,EAAE0L,QAK1B,MAAOC,GAGJ,QAASQ,GAAyB3S,GAKrC,IAAI,GAHA4S,GAAQ5S,EAAe6S,MAAM,MAC7B/T,EAAM8T,EAAMlZ,OAERoZ,EAAI,EAAGA,EAAIhU,EAAKgU,IAEJ,0BAAbF,EAAME,GACLF,EAAME,GAAKpW,MAAMqW,YAAN,kBACO,0BAAbH,EAAME,KACXF,EAAME,GAAKpW,MAAMqW,YAAN,aAGnB,OAAOH,GAAMI,KAAK,MAGf,QAASC,GAAcpa,EAAGqa,EAAIC,GAEjC,OACIvR,EAAG/I,EAAI+H,KAAKuQ,IAAI+B,GAAMtS,KAAKwS,IAAID,GAC/BrR,EAAGjJ,EAAI+H,KAAKwS,IAAIF,GAAMtS,KAAKwS,IAAID,GAC/BlV,EAAGpF,EAAI+H,KAAKuQ,IAAIgC,IAIjB,QAASE,GAAkBza,GAK9B,IAAI,GAHA0a,MACAC,EAAA,OAEIC,EAAI,EAAGA,EAAI5a,EAAG4a,IAElBD,EAAKN,EAAc,EAAGrS,KAAK+K,SAAW/K,KAAKoK,GAAK,EAAGpK,KAAK+K,SAAW/K,KAAKoK,GAAK,GAC7EsI,EAAIhB,KAAK,GAAI5V,OAAMC,QAAS4W,EAAG3R,EAAG2R,EAAGzR,EAAGyR,EAAGtV,GAG/C,OAAOqV,GAGJ,QAASG,GAAsB7a,EAAG8a,GAKrC,IAAI,GAHAJ,MACAC,EAAA,OAEII,EAAI,EAAGA,EAAI/a,EAAG+a,IAElBJ,EAAKN,EAAcrS,KAAK+K,SAAW+H,EAAW9S,KAAK+K,SAAW/K,KAAKoK,GAAK,EAAGpK,KAAK+K,SAAW/K,KAAKoK,GAAK,GACrGsI,EAAIhB,KAAK,GAAI5V,OAAMC,QAAS4W,EAAG3R,EAAG2R,EAAGzR,EAAGyR,EAAGtV,GAG/C,OAAOqV,GAGJ,QAASM,GAAwBhb,GAQpC,IAAK,GAND0a,MACAO,EAAMjT,KAAKoK,IAAM,EAAIpK,KAAKkT,KAAK,IAC/BC,EAAM,EAAMnb,EACZgJ,EAAA,OAAGE,EAAA,OAAG7D,EAAA,OAAGpF,EAAA,OACTmb,EAAA,OAEKnO,EAAI,EAAGA,EAAIjN,EAAGiN,IACnB/D,EAAI+D,EAAIkO,EAAM,EAAKA,EAAK,EACxBlb,EAAI+H,KAAKkT,KAAK,EAAIhS,EAAIA,GACtBkS,EAAMnO,EAAIgO,EACVjS,EAAIhB,KAAKuQ,IAAI6C,GAAOnb,EACpBoF,EAAI2C,KAAKwS,IAAIY,GAAOnb,EAEpBya,EAAIhB,KAAK,GAAI5V,OAAMC,QAASiF,EAAGE,EAAG7D,GAEtC,OAAOqV,GAGJ,QAASW,GAAiB3O,EAAKyB,GAElC,MAAO,IAAIrK,OAAMC,QAAQwC,EAAYmG,EAAKyB,GAAM5H,EAAYmG,EAAKyB,GAAM5H,EAAYmG,EAAKyB,IAGrF,QAASmN,GAAiBxD,EAAKpL,EAAKyB,GAEvC,MAAOkN,GAAiB3O,EAAKyB,GAAK5F,IAAIuP,GAGnC,QAASyD,GAAkBrU,GAE9B,GAAIiL,GAAU,IAAMnK,KAAKoK,EACzB,OAAO,IAAItO,OAAM0X,MAAMtU,EAAS8B,EAAImJ,EAASjL,EAASgC,EAAIiJ,EAASjL,EAAS7B,EAAI8M,EAASjL,EAASuU,OAG/F,QAASC,GAAiBxX,EAAUQ,GAEvC,GAAIC,GAAS,GAAIb,OAAMuN,WACnBnL,EAAMhC,EAASpD,OACfwQ,EAAS,EACTnN,EAAA,OACAC,EAAA,OACAuX,IACAC,cAEJ,IAAIhX,GAAO,QAAPA,KAEAT,EAAkCiG,SAA1BlG,EAASoN,GAAQnN,KAAsBD,EAASoN,GAAQnN,KAAOD,EAASoN,GAChFlN,EAA8BgG,SAAxBlG,EAASoN,GAAQlN,GAAoBF,EAASoN,GAAQlN,GAAK,KACjEO,EAAOC,KAAKT,EAAM,SAASoJ,GACpBnJ,IAECuX,EAAevX,GAAMmJ,GAEzBqO,WAAWlC,MAAMnK,SAAShC,EAAGnJ,GAAGA,IAChCkN,IACGA,IAAWpL,EAEa,kBAAbxB,IAENA,EAASkX,WAAYD,GAKzB/W,MAKZA,KAGG,QAASiX,GAAa3X,EAAUQ,GAEnC,GAAIwB,GAAMhC,EAASpD,OACfwQ,EAAS,EACTnN,EAAA,OACAC,EAAA,OACA0X,IACAxU,aACA3C,OAAS,GAAIb,OAAM8N,cAEvBjN,OAAOoX,YAAc,EAErB,IAAInX,GAAO,QAAPA,KAEAT,EAAkCiG,SAA1BlG,EAASoN,GAAQnN,KAAsBD,EAASoN,GAAQnN,KAAOD,EAASoN,GAChFlN,EAA8BgG,SAAxBlG,EAASoN,GAAQlN,GAAoBF,EAASoN,GAAQlN,GAAK,KAEjEO,OAAOC,KAAKT,EAAM,SAASoO,GACpBnO,IAEC0X,EAAa1X,GAAMmO,GAEvBjL,SAASoS,MAAMlO,QAAQ+G,EAAKnO,GAAGA,IAC/BkN,IACGA,IAAWpL,EAEa,kBAAbxB,IAENA,EAAS4C,SAAUwU,GAKvBlX,MAyBZA,KAGG,QAASoX,GAAmB1U,EAAU2U,GAEzC,IAAI,GAAIC,GAAI,EAAGA,EAAI5U,EAASxG,OAAQob,IAEhC5U,EAAS4U,GAAGC,MAAQ7U,EAAS4U,GAAGE,MAAQH,EACxC3U,EAAS4U,GAAGxJ,aAAc,EAI3B,QAAS2J,GAAqB/U,EAAUgV,GAE3C,IAAI,GAAIC,GAAI,EAAGA,EAAIjV,EAASxG,OAAQyb,IAEhCjV,EAASiV,GAAG9J,gBAAkB6J,EAC9BhV,EAASiV,GAAG7J,aAAc,EAI3B,QAAS8J,GAAwBlV,EAAU0D,EAAWE,GAEzD,IAAI,GAAIuR,GAAI,EAAGA,EAAInV,EAASxG,OAAQ2b,IAE7BzR,IACC1D,EAASmV,GAAGzR,UAAYA,GAEzBE,IACC5D,EAASmV,GAAGvR,UAAYA,GAE5B5D,EAASmV,GAAG/J,aAAc,EAI3B,QAASgK,GAAiBC,EAAUva,EAAKwa,GAE5C,GAAiD,mBAA9Cnb,OAAOc,UAAUwN,SAASlP,KAAK+b,GAClC,CAEI,IAAI,GADAC,GAAc,GACVC,EAAI,EAAGA,EAAIF,EAAU9b,OAAQgc,IAEjCD,GAAeD,EAAUE,GAAK,IAGlC,OAAOH,GAASI,QAAQ3a,EAAKya,GAI7B,MAAOF,GAASI,QAAQ3a,EAAKwa,GAI9B,QAASI,GAAUvG,GAEtBwG,QAAQC,IAAIzG,EAAOzN,EAAGyN,EAAOvN,EAAGuN,EAAOpR,GAIpC,QAAS8X,GAAe7S,EAAI8S,GAC/B,GAAIC,IACAC,cACA3W,YACA4W,eAAgB,EAChBC,aAAc,EAElBC,gBAAiBnT,EAAGoT,oBAAoBN,EAAS9S,EAAGqT,iBACpDC,iBAAmBtT,EAAGoT,oBAAoBN,EAAS9S,EAAGuT,kBA8BtD,KAAK,GA1BDC,IACAC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,WACRC,MAAQ,WACRC,MAAQ,WACRC,MAAQ,OACRC,MAAQ,YACRC,MAAQ,YACRC,MAAQ,YACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,eACRC,KAAQ,OACRC,KAAQ,gBACRC,KAAQ,QACRC,KAAQ,iBACRC,KAAQ,MACRC,KAAQ,eACRC,KAAQ,SAIHC,EAAE,EAAGA,EAAI5B,eAAgB4B,IAAK,CACnC,GAAIC,GAAUhV,EAAGiV,iBAAiBnC,EAASiC,EAC3CC,GAAQE,SAAW1B,EAAMwB,EAAQ1Y,MACjCyW,EAAO1W,SAAS+S,KAAK4F,GACrBjC,EAAOG,cAAgB8B,EAAQhZ,KAInC,IAAK/F,EAAE,EAAGA,EAAIqd,iBAAkBrd,IAAK,CACjC,GAAIkf,GAAYnV,EAAGoV,gBAAgBtC,EAAS7c,EAC5Ckf,GAAUD,SAAW1B,EAAM2B,EAAU7Y,MACrCyW,EAAOC,WAAW5D,KAAK+F,GACvBpC,EAAOE,gBAAkBkC,EAAUnZ,KAGvC2W,QAAQC,IAAIG,GLpnBH5b,OAAOC,eAAed,EAAQ,cAAce,OAAM,IAAOf,EKnBtDsR,cAAAA,ELmB0FtR,EKd1FyR,cAAAA,ELc8HzR,EKT9H6F,eAAAA,ELSoK7F,EKCpK+R,YAAAA,ELDoM/R,EKmBpM2F,YAAAA,ELnBoO3F,EKwBpOoS,uBAAAA,ELxB0RpS,EKiC1R2S,uBAAAA,ELjCgV3S,EK0ChV6S,uBAAAA,EL1CsY7S,EKmDtY+S,sBAAAA,ELnD0b/S,EK4D1boT,SAAAA,EL5DodpT,EKiEpduT,cAAAA,ELjEwfvT,EKiFxf4T,kBAAAA,ELjFoiB5T,EK6FpiB6T,kBAAAA,EL7FglB7T,EKqGhlB+T,YAAAA,ELrGgnB/T,EK4GhnBiU,kBAAAA,EL5G4pBjU,EKmH5pBoU,cAAAA,ELnHgsBpU,EK0HhsBqU,qBAAAA,EL1HkvBrU,EKiIlvB2U,aAAAA,ELjIoxB3U,EK6IpxBkV,qBAAAA,EL7Is0BlV,EKsJt0B0V,4BAAAA,ELtJs4B1V,EKsKt4BgW,+BAAAA,ELtK48BhW,EK0L58BoW,cAAAA,EL1Lg/BpW,EK6Mh/BsW,cAAAA,EL7MohCtW,EK6NphC4W,iBAAAA,EL7N8jC5W,EKqP9jCwI,iBAAAA,ELrPwmCxI,EK8PxmCmX,oBAAAA,EL9PwpCnX,EKyQxpCqX,SAAAA,ELzQkrCrX,EK2UlrCmZ,yBAAAA,EL3U4uCnZ,EK2V5uCyZ,cAAAA,EL3VgxCzZ,EKoWhxC6Z,kBAAAA,ELpW4zC7Z,EKkX5zCia,sBAAAA,ELlXg3Cja,EKgYh3Coa,wBAAAA,ELhYw6Cpa,EKoZx6Cya,iBAAAA,ELpZk9Cza,EKyZl9C0a,iBAAAA,ELzZ4/C1a,EK8Z5/C2a,kBAAAA,EL9ZwiD3a,EKoaxiD8a,iBAAAA,ELpaklD9a,EK0cllDib,aAAAA,EL1conDjb,EKugBpnDob,mBAAAA,ELvgBkqDpb,EKghBlqDyb,qBAAAA,ELhhBotDzb,EKyhBptD4b,wBAAAA,ELzhB4wD5b,EKuiB5wD8b,iBAAAA,ELviBszD9b,EKyjBtzDoc,UAAAA,ELzjBk1Dpc,EK+jBl1Duc,eAAAA,CAzlBHvc,GAAA+e,OAAS,GAAI7b,OAAMC,QAAQ,EAAG,EAAG,GACjCnD,EAAAgf,SAAW,GAAI9b,OAAMC,QAAQ,OAAO,GACpCnD,EAAAif,SAAW,GAAI/b,OAAMC,aAAY,EAAG,GACpCnD,EAAAkf,UAAY,GAAIhc,OAAMC,QAAQ,EAAG,EAAG,GACpCnD,EAAAmf,YAAc,GAAIjc,OAAMC,QAAQ,EAAG,EAAG,GACtCnD,EAAAof,aAAe,GAAIlc,OAAMC,QAAQ,EAAG,aLwE3Ckc,GAAG,SAAS3f,EAAQU,EAAOJ,GM/EjC,YAEO,SAASmL,GAAcnF,EAAMsZ,EAAYC,GAC5CvZ,EAAOA,GAAQ,KACf,IAAIwZ,GAAK3a,SAASsG,cAAcnF,EAOhC,OANGsZ,IACCA,EAAWrQ,QAAQ,SAASwQ,GACxBD,EAAGE,UAAU/X,IAAI8X,KAGtBF,IAASC,EAAGjU,UAAYgU,GACpBC,EAGJ,QAASrM,GAAUpS,EAAO+K,EAAKyB,GAClC,OAAQxM,EAAQ+K,IAAQyB,EAAMzB,GAG3B,QAAS6T,GAAKC,EAAM9T,EAAKyB,GAC5B,OAAQA,EAAMzB,GAAO8T,EAAO9T,EAGzB,QAASrF,GAAI1F,EAAO8e,EAAWC,EAAWC,EAASC,GACtD,MAAOL,GAAKxM,EAAUpS,EAAO8e,EAAWC,GAAYC,EAASC,GAG1D,QAASC,GAAMlf,EAAO+K,EAAKyB,GAC9B,MAAOnG,MAAK0E,IAAI1E,KAAKmG,IAAIxM,EAAOqG,KAAK0E,IAAIA,EAAKyB,IAAOnG,KAAKmG,IAAIzB,EAAKyB,IAGhE,QAASmJ,GAASwJ,EAAIC,GACzB,GAAIC,GAAKD,EAAG/X,EAAI8X,EAAG9X,EACfiY,EAAKF,EAAG7X,EAAI4X,EAAG5X,CACnB,OAAOlB,MAAKkT,KAAK8F,EAAKA,EAAKC,EAAKA,GAG7B,QAASC,GAAWC,EAAIC,EAAIC,EAAIC,GACnC,GAAIN,GAAKK,EAAKF,EACVF,EAAKK,EAAKF,CACd,OAAOpZ,MAAKkT,KAAK8F,EAAKA,EAAKC,EAAKA,GAG7B,QAASM,GAAgBC,EAAIC,GAChC,MAAOnK,GAASkK,EAAIC,IAAOD,EAAGE,OAASD,EAAGC,OAGvC,QAASC,GAAqB3Y,EAAGE,EAAG0Y,GACvC,MAAOV,GAAWlY,EAAGE,EAAG0Y,EAAO5Y,EAAG4Y,EAAO1Y,GAAK0Y,EAAOF,OAGlD,QAASG,GAAY7Y,EAAGE,EAAG4Y,GAC9B,MAAOC,GAAQ/Y,EAAG8Y,EAAK9Y,EAAG8Y,EAAK9Y,EAAI8Y,EAAKjd,QACjCkd,EAAQ7Y,EAAG4Y,EAAK5Y,EAAG4Y,EAAK5Y,EAAI4Y,EAAK9c,QAGrC,QAAS+c,GAAQpgB,EAAO+K,EAAKyB,GAChC,MAAOxM,IAASqG,KAAK0E,IAAIA,EAAKyB,IAAQxM,GAASqG,KAAKmG,IAAIzB,EAAKyB,GAG1D,QAAS6T,GAAeC,EAAMC,EAAMC,EAAMC,GAC7C,MAAOpa,MAAKmG,IAAI8T,EAAMC,IAASla,KAAK0E,IAAIyV,EAAMC,IACvCpa,KAAK0E,IAAIuV,EAAMC,IAASla,KAAKmG,IAAIgU,EAAMC,GAG3C,QAASC,GAAcC,EAAIC,GAC9B,MAAOP,GAAeM,EAAGtZ,EAAGsZ,EAAGtZ,EAAIsZ,EAAGzd,MAAO0d,EAAGvZ,EAAGuZ,EAAGvZ,EAAIuZ,EAAG1d,QACtDmd,EAAeM,EAAGpZ,EAAGoZ,EAAGpZ,EAAIoZ,EAAGtd,OAAQud,EAAGrZ,EAAGqZ,EAAGrZ,EAAIqZ,EAAGvd,QAG3D,QAASkN,GAAcC,GAC1B,MAAOA,GAAU,IAAMnK,KAAKoK,GAGzB,QAASC,GAAcC,GAC1B,MAAiB,KAAVA,EAAgBtK,KAAKoK,GAGzB,QAASoQ,GAAmBzB,EAAI0B,GACnC,MAAOza,MAAK0a,MAAMD,EAAGvZ,EAAI6X,EAAG7X,EAAGuZ,EAAGzZ,EAAI+X,EAAG/X,GAGtC,QAASzC,GAAYmG,EAAKyB,GAC7B,MAAOzB,GAAM1E,KAAK+K,UAAY5E,EAAMzB,GAGjC,QAASlG,GAAUkG,EAAKyB,GAC3B,MAAOnG,MAAKC,MAAMyE,EAAM1E,KAAK+K,UAAY5E,EAAMzB,EAAM,IAGlD,QAASiW,GAAchhB,EAAOihB,GACjC,GAAIC,GAAO7a,KAAK8a,IAAI,GAAIF,EACxB,OAAO5a,MAAKqG,MAAM1M,EAAQkhB,GAAQA,EAG/B,QAASE,GAAaphB,EAAOqhB,GAChC,MAAOhb,MAAKqG,MAAM1M,EAAQqhB,GAAWA,EAGlC,QAASC,GAAgBnC,EAAIC,EAAI0B,EAAI1iB,EAAGmjB,GAQ3C,MAPAA,GAASA,MACTA,EAAOla,EAAIhB,KAAK8a,IAAI,EAAI/iB,EAAG,GAAK+gB,EAAG9X,EACd,GAAT,EAAIjJ,GAASA,EAAIghB,EAAG/X,EACrBjJ,EAAIA,EAAI0iB,EAAGzZ,EACtBka,EAAOha,EAAIlB,KAAK8a,IAAI,EAAI/iB,EAAG,GAAK+gB,EAAG5X,EACd,GAAT,EAAInJ,GAASA,EAAIghB,EAAG7X,EACrBnJ,EAAIA,EAAI0iB,EAAGvZ,EACfga,EAGJ,QAASC,GAAYrC,EAAIC,EAAI0B,EAAIW,EAAIrjB,EAAGmjB,GAU3C,MATAA,GAASA,MACTA,EAAOla,EAAIhB,KAAK8a,IAAI,EAAI/iB,EAAG,GAAK+gB,EAAG9X,EACH,EAArBhB,KAAK8a,IAAI,EAAI/iB,EAAG,GAASA,EAAIghB,EAAG/X,EACtB,GAAT,EAAIjJ,GAASA,EAAIA,EAAI0iB,EAAGzZ,EACzBjJ,EAAIA,EAAIA,EAAIqjB,EAAGpa,EAC1Bka,EAAOha,EAAIlB,KAAK8a,IAAI,EAAI/iB,EAAG,GAAK+gB,EAAG5X,EACH,EAArBlB,KAAK8a,IAAI,EAAI/iB,EAAG,GAASA,EAAIghB,EAAG7X,EACtB,GAAT,EAAInJ,GAASA,EAAIA,EAAI0iB,EAAGvZ,EACzBnJ,EAAIA,EAAIA,EAAIqjB,EAAGla,EACnBga,EAGJ,QAASG,GAAWC,EAAQC,GAC/B,GAAIzC,GAAA,OAAIC,EAAA,OAAIyC,EAAA,OAAMC,EAAA,MAElBF,GAAQG,OAAOJ,EAAO,GAAGta,EAAGsa,EAAO,GAAGpa,EAEtC,KAAI,GAAI3I,GAAI,EAAGA,EAAI+iB,EAAOxiB,OAAS,EAAGP,GAAK,EACvCugB,EAAKwC,EAAO/iB,GACZwgB,EAAKuC,EAAO/iB,EAAI,GAChBijB,GAAQ1C,EAAG9X,EAAI+X,EAAG/X,GAAK,EACvBya,GAAQ3C,EAAG5X,EAAI6X,EAAG7X,GAAK,EACvBqa,EAAQI,iBAAiB7C,EAAG9X,EAAG8X,EAAG5X,EAAGsa,EAAMC,EAG/C3C,GAAKwC,EAAOA,EAAOxiB,OAAS,GAC5BigB,EAAKuC,EAAOA,EAAOxiB,OAAS,GAC5ByiB,EAAQI,iBAAiB7C,EAAG9X,EAAG8X,EAAG5X,EAAG6X,EAAG/X,EAAG+X,EAAG7X,GAG3C,QAASmR,GAAcpa,EAAGqa,EAAIC,GACjC,OACIvR,EAAG/I,EAAI+H,KAAKuQ,IAAI+B,GAAMtS,KAAKwS,IAAID,GAC/BrR,EAAGjJ,EAAI+H,KAAKwS,IAAIF,GAAMtS,KAAKwS,IAAID,GAC/BlV,EAAGpF,EAAI+H,KAAKuQ,IAAIgC,IAIjB,QAASE,GAAkBza,GAI9B,IAAI,GAHA0a,MACAC,EAAA,OAEIpa,EAAI,EAAGA,EAAIP,EAAGO,IAElBoa,EAAKN,EAAc,EAAGrS,KAAK+K,SAAW/K,KAAKoK,GAAK,EAAGpK,KAAK+K,SAAW/K,KAAKoK,GAAK,GAC7EsI,EAAIhB,MAAM1Q,EAAE2R,EAAG3R,EAAGE,EAAEyR,EAAGzR,EAAG7D,EAAEsV,EAAGtV,GAGnC,OAAOqV,GAGJ,QAASM,GAAwBhb,GAOpC,IAAK,GAND0a,MACAO,EAAMjT,KAAKoK,IAAM,EAAIpK,KAAKkT,KAAK,IAC/BC,EAAM,EAAMnb,EACZgJ,EAAA,OAAGE,EAAA,OAAG7D,EAAA,OAAGpF,EAAA,OACTmb,EAAA,OAEKnO,EAAI,EAAGA,EAAIjN,EAAGiN,IACnB/D,EAAI+D,EAAIkO,EAAM,EAAKA,EAAK,EACxBlb,EAAI+H,KAAKkT,KAAK,EAAIhS,EAAIA,GACtBkS,EAAMnO,EAAIgO,EACVjS,EAAIhB,KAAKuQ,IAAI6C,GAAOnb,EACpBoF,EAAI2C,KAAKwS,IAAIY,GAAOnb,EAEpBya,EAAIhB,MAAM1Q,EAAEA,EAAGE,EAAEA,EAAG7D,EAAEA,GAE1B,OAAOqV,GAGJ,QAASpP,GAAMpK,GAClB,MAAO+P,MAAKC,MAAMD,KAAK2S,UAAU1iB,IAG9B,QAAS2iB,GAAQC,GACpB,MAA+C,mBAAxCriB,OAAOc,UAAUwN,SAASlP,KAAKijB,GAGnC,QAASC,GAAaC,GAKzB,IAJA,GAAIC,GAAeD,EAAMljB,OACrBojB,EAAA,OACAC,EAAA,OAEG,IAAMF,GAETE,EAAcnc,KAAKC,MAAMD,KAAK+K,SAAWkR,GACzCA,GAAgB,EAChBC,EAAiBF,EAAMC,GACvBD,EAAMC,GAAgBD,EAAMG,GAC5BH,EAAMG,GAAeD,CAGzB,OAAOF,GAGJ,QAASI,GAAaJ,EAAOhkB,GAIhC,IAAI,GAHAqkB,MACAne,EAAM8d,EAAMljB,OAERP,EAAI,EAAGA,EAAI2F,EAAK3F,GAAKP,EAEzBqkB,EAAS3K,KAAKsK,EAAMzjB,GAGxB,OAAO8jB,GAGJ,QAASC,GAAoBN,GAChC,MAAOA,GAAMhc,KAAK+K,SAAWiR,EAAMljB,OAAS,GAGzC,QAASyjB,GAAwBP,EAAOQ,EAAMC,GAIjD,IAAI,GAHAJ,MACAne,EAAM8d,EAAMljB,OAERP,EAAI,EAAGA,EAAI2F,EAAK3F,IAEjBwhB,EAAQiC,EAAMzjB,GAAG8E,EAAGmf,EAAMC,IACzBJ,EAAS3K,KAAKsK,EAAMzjB,GAG5B,OAAO8jB,GAGJ,QAASK,GAAoBV,EAAO5hB,GAGvC,IAAI,GADA/B,MACIE,EAAI,EAAGA,EAAIyjB,EAAMljB,OAAQP,IAE7BF,EAAEqZ,KAAKsK,EAAMzjB,GAAG6B,GAEpB,OAAO/B,GAGJ,QAASskB,GAAOjgB,EAAUkgB,EAAQC,EAAWC,EAAOC,GACvDA,EAAaA,GAAc,CAC3B,IAAIxkB,GAAI,EACJykB,EAAU,QAAVA,KACAC,WAAW,WACPvgB,EAASkgB,GACTrkB,IACGA,EAAIskB,GACHG,KACLF,GAEPG,YAAW,WACPD,KACDD,GAGA,QAASG,KAEZ,QAASpgB,OAAOqgB,OAASC,UAAUC,UAAUrV,QAAQ,UAAY,EAG9D,QAASsV,KAEZ,MAAiC,mBAAnBC,gBAGX,QAASC,KAEZ,MAAO/jB,QAAOc,UAAUwN,SAASlP,KAAKiE,OAAO2gB,aAAazV,QAAQ,eAAiB,EAGhF,QAAS0V,KAEZ,QAAS5gB,OAAO6gB,SAAWT,IAGxB,QAASU,KAEZ,QAAkBngB,SAASogB,aAGxB,QAASC,KACZ,MAAOV,WAAUW,SAASC,cAAchW,QAAQ,UAG7C,QAASiW,KACZ,MAAOb,WAAUW,SAASC,cAAchW,QAAQ,UAG7C,QAASkW,KACZ,GAAMphB,OAAOqhB,sBAAuB,CAKhC,IAAI,GAJAC,GAAS3gB,SAASsG,cAAc,UAChCsa,GAAS,QAAS,qBAAsB,YAAa,aACrD9C,GAAU,EAENhjB,EAAE,EAAEA,EAAE,EAAEA,IACZ,IAEI,GADAgjB,EAAU6C,EAAO7b,WAAW8b,EAAM9lB,IAC9BgjB,GAA2C,kBAAzBA,GAAQ7Y,aAE1B,OAAO,EAEb,MAAM5K,IAGZ,OAAO,EAGX,OAAO,EAGJ,QAASwmB,GAAaniB,GAEzB,MAAGA,GAAK6L,QAAQ,aACL,YACH7L,EAAK6L,QAAQ,cACV,aACH7L,EAAK6L,QAAQ,aACV,YADN,OAIF,QAASuW,GAAcC,EAAWC,GAErCA,EAASA,GAAU,IAEnB,IAAIC,GAAA,MAEAd,MASAc,EAAQjhB,SAASkhB,YAAY,eAC7BD,EAAME,gBAAgBJ,GAAW,GAAM,EAAOC,GAC9ChhB,SAAS8gB,cAAcG,KATvBA,EAAQ,GAAIG,aAAYL,GACpBM,OAAQL,IAEZhhB,SAAS8gB,cAAcG,IAUxB,QAASK,GAAUC,EAAQC,GAE9BA,EAAUA,GAAWxhB,SAASC,KAE3BuhB,EAAQte,MAAMqe,SAAWA,IAExBC,EAAQte,MAAMqe,OAASA,GAIxB,QAASE,GAAmB7G,GAE/BA,EAAOA,EAAKtD,QAAQ,OAAQ,OAAOA,QAAQ,OAAQ,MACnD,IAAIoK,GAAQ,GAAIC,QAAO,SAAW/G,EAAO,aACrCgH,EAAUF,EAAMG,KAAKC,SAASC,OAClC,OAAmB,QAAZH,EAAmB,GAAKI,mBAAmBJ,EAAQ,GAAGtK,QAAQ,MAAO,MNzRnEtb,OAAOC,eAAed,EAAQ,cAAce,OAAM,IAAOf,EM9EtDmL,cAAAA,EN8E0FnL,EMlE1FmT,UAAAA,ENkEsHnT,EM9DtH2f,KAAAA,EN8DwI3f,EM1DxIyG,IAAAA,EN0DwJzG,EMtDxJigB,MAAAA,ENsD4KjgB,EMlD5K0W,SAAAA,ENkDsM1W,EM5CtMsgB,WAAAA,EN4CoOtgB,EMtCpO2gB,gBAAAA,ENsC4Q3gB,EMlC5Q+gB,qBAAAA,ENkC8T/gB,EM9B9TihB,YAAAA,EN8B8VjhB,EMzB9VmhB,QAAAA,ENyBsXnhB,EMrBtXohB,eAAAA,ENqB4ZphB,EMhB5ZyhB,cAAAA,ENgBgczhB,EMXhcsR,cAAAA,ENWoetR,EMPpeyR,cAAAA,ENOwgBzR,EMHxgB4hB,mBAAAA,ENGsjB5hB,EMCtjB2F,YAAAA,ENDslB3F,EMKtlB4F,UAAAA,ENLknB5F,EMSlnB+hB,cAAAA;ANTspB/hB,EMctpBmiB,aAAAA,ENdwrBniB,EMkBxrBqiB,gBAAAA,ENlBguBriB,EM6BhuBuiB,YAAAA,EN7BgwBviB,EM0ChwByiB,WAAAA,EN1C8xBziB,EM4D9xByZ,cAAAA,EN5Dk0BzZ,EMoEl0B6Z,kBAAAA,ENpE82B7Z,EMiF92Boa,wBAAAA,ENjFs6Bpa,EMoGt6B0K,MAAAA,ENpG07B1K,EMwG17BijB,QAAAA,ENxGk9BjjB,EM4Gl9BmjB,aAAAA,EN5Go/BnjB,EM6Hp/BwjB,aAAAA,EN7HshCxjB,EMyIthC0jB,oBAAAA,ENzIskC1jB,EM6ItkC2jB,wBAAAA,EN7I8nC3jB,EM0J9nC8jB,oBAAAA,EN1J8qC9jB,EMoK9qC+jB,OAAAA,ENpKosC/jB,EMoLpsCskB,QAAAA,ENpL4tCtkB,EMyL5tC0kB,UAAAA,ENzLwvC1kB,EM8LxvC4kB,SAAAA,EN9LkxC5kB,EMmMlxC8kB,SAAAA,ENnM4yC9kB,EMwM5yCglB,KAAAA,ENxM8zChlB,EM6M9zCklB,MAAAA,EN7Mk1CllB,EMiNl1CqlB,UAAAA,ENjN82CrlB,EMqN92CslB,SAAAA,ENrNw4CtlB,EM2Ox4C0lB,aAAAA,EN3O06C1lB,EMqP16C2lB,cAAAA,ENrP88C3lB,EM0Q98CmmB,UAAAA,EN1Q0+CnmB,EMoR1+CsmB,mBAAAA,YN1QL","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nimport {randomRange, randomInt} from '../utils/utils';\nimport {getDataTexture, getMouseWorldPos} from '../utils/three-utils';\nimport Loader from '../utils/loader';\nimport GPGPU from './gpgpu';\n\nconst glslify = require('glslify');\nconst Stats = require('../libs/stats.min');\n\nlet scope,\n    scene,\n    camera,\n    renderer,\n    container,\n    mousePos,\n    gpgpu,\n    mesh,\n    tOriginalPositions,\n    tPositions,\n    tData,\n    simulationMaterial,\n    renderMaterial,\n    stats;\n\nexport default class App\n{\n    constructor()\n    {\n        scope = this;\n\n        mousePos = new THREE.Vector3(0, 0, 0.5);\n\n        this.createBaseElements();\n        this.addListeners();\n        // this.addStats();\n\n        const manifest = [\n            {file:'assets/img/particle.png', id:'particle'}\n        ];\n        this.loadAssets(manifest, function(assets){\n            scope.createScene(assets);\n            scope.handleResize();\n            scope.update();\n        });\n    }\n\n    loadAssets(manifest, callback)\n    {\n        const loader = new Loader();\n\n        loader.load(manifest, assets => {\n            if(typeof callback === 'function')\n            {\n                callback(assets);\n            }\n        });\n    }\n\n    createBaseElements()\n    {\n        let width = window.innerWidth,\n            height = window.innerHeight;\n\n        scene = new THREE.Scene();\n        camera = new THREE.PerspectiveCamera(50, width / height, 0.1, 1000);\n        camera.position.z = 350;\n\n        renderer = new THREE.WebGLRenderer();\n        renderer.setClearColor(0x121212, 1);\n        renderer.setSize(width, height);\n        document.body.appendChild(renderer.domElement);\n    }\n\n    createScene(assets)\n    {\n        let texSize = 512,\n            format = THREE.RGBAFormat,\n            channels = format === THREE.RGBFormat ? 3 : 4,\n            len = texSize * texSize * channels,\n            data1 = new Float32Array(len),\n            data2 = new Float32Array(len),\n            size = 50;\n\n        for (var i = 0; i < len; i += channels)\n        {\n            data1[i + 0] = randomRange(-size, size);\n            data1[i + 1] = randomRange(-size, size);\n            data1[i + 2] = randomRange(-size, size);\n            data1[i + 3] = 0;\n\n            data2[i + 0] = randomRange(0.1, 0.9);\n            data2[i + 1] = randomInt(1, 6);\n            data2[i + 2] = 0;\n            data2[i + 3] = 0;\n        }\n\n        tOriginalPositions = getDataTexture(data1, texSize, texSize, format);\n        tPositions = getDataTexture(data1, texSize, texSize, format);\n        tData = getDataTexture(data2, texSize, texSize, format);\n\n        simulationMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                tOriginalPositions: {type:'t', value:tOriginalPositions},\n                tPositions: {type:'t', value:tPositions},\n                tData: {type:'t', value:tData},\n                curlScale: {type:'f', value:1.5},\n                amplitude: {type:'f', value:125},\n                time: {type:'f', value:0},\n                mousePosition: {type:'v3', value:mousePos},\n                forceStrength: {type:'f', value:10000},\n                rotation: {type:'f', value:0.05}\n            },\n            vertexShader: glslify('../../glsl/sim-vertex.glsl'),\n            fragmentShader: glslify('../../glsl/sim-fragment.glsl')\n        });\n\n        renderMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                tOriginalPositions: {type:'t', value:tOriginalPositions},\n                tPositions: {type:'t', value:tPositions},\n                tData: {type:'t', value:tData},\n                map: {type:'t', value:assets.textures.particle},\n                pointSize: {type:'f', value:1},\n                texSize: {type:'f', value:texSize}\n            },\n            vertexShader: glslify('../../glsl/render-vertex.glsl'),\n            fragmentShader: glslify('../../glsl/render-fragment.glsl'),\n            transparent: true,\n            blending: THREE.AdditiveBlending,\n            depthTest: false,\n            depthWrite: false,\n        });\n\n        // particles\n        len = texSize * texSize;\n        const vertices = new Float32Array(len * 3);\n        for(let i = 0; i < len; i++)\n        {\n            vertices[i * 3 + 0] = (i % texSize) / texSize;\n            vertices[i * 3 + 1] = Math.floor(i / texSize) / texSize;\n        }\n\n        let geo = new THREE.BufferGeometry();\n        geo.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\n\n        mesh = new THREE.Points(geo, renderMaterial);\n        scene.add(mesh);\n\n        gpgpu = new GPGPU({\n            renderer: renderer,\n            simulationMaterial: simulationMaterial,\n            renderMaterial: renderMaterial,\n            size: texSize,\n            format: format\n        });\n    }\n\n    addListeners()\n    {\n        window.addEventListener('resize', this.handleResize, false);\n        window.addEventListener('orientationchange', this.handleResize, false);\n        window.addEventListener('mousemove', this.handleMouseMove, false);\n    }\n\n    removeListeners()\n    {\n        window.removeEventListener('resize', this.handleResize);\n        window.removeEventListener('orientationchange', this.handleResize);\n        window.removeEventListener('mousemove', this.handleMouseMove);\n    }\n\n    addStats()\n    {\n        stats = new Stats();\n        stats.domElement.style.position = 'absolute';\n        stats.domElement.style.left = '0px';\n        stats.domElement.style.bottom = '0px';\n        document.body.appendChild(stats.domElement);\n    }\n\n    handleResize(e)\n    {\n        let width = window.innerWidth,\n            height = window.innerHeight;\n\n        camera.aspect = width / height;\n\n        camera.updateProjectionMatrix();\n        renderer.setSize(width, height);\n    }\n\n    handleMouseMove(e)\n    {\n        mousePos.x = ( e.clientX / window.innerWidth ) * 2 - 1;\n        mousePos.y = - ( e.clientY / window.innerHeight ) * 2 + 1;\n    }\n\n    update()\n    {\n        simulationMaterial.uniforms.time.value += 0.001;\n        simulationMaterial.uniforms.mousePosition.value = getMouseWorldPos(mousePos, camera);\n\n        gpgpu.update('tPositions');\n\n        renderer.render(scene, camera);\n\n        if(stats)\n        {\n            stats.update();\n        }\n\n        requestAnimationFrame(scope.update);\n    }\n\n    dispose()\n    {\n        removeListeners();\n    }\n}","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _utils=require('../utils/utils');var _threeUtils=require('../utils/three-utils');var _loader=require('../utils/loader');var _loader2=_interopRequireDefault(_loader);var _gpgpu=require('./gpgpu');var _gpgpu2=_interopRequireDefault(_gpgpu);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var Stats=require('../libs/stats.min');var scope=void 0,scene=void 0,camera=void 0,renderer=void 0,container=void 0,mousePos=void 0,gpgpu=void 0,mesh=void 0,tOriginalPositions=void 0,tPositions=void 0,tData=void 0,simulationMaterial=void 0,renderMaterial=void 0,stats=void 0;var App=function(){function App(){_classCallCheck(this,App);scope=this;mousePos=new THREE.Vector3(0,0,0.5);this.createBaseElements();this.addListeners();// this.addStats();\nvar manifest=[{file:'assets/img/particle.png',id:'particle'}];this.loadAssets(manifest,function(assets){scope.createScene(assets);scope.handleResize();scope.update();});}_createClass(App,[{key:'loadAssets',value:function loadAssets(manifest,callback){var loader=new _loader2.default();loader.load(manifest,function(assets){if(typeof callback==='function'){callback(assets);}});}},{key:'createBaseElements',value:function createBaseElements(){var width=window.innerWidth,height=window.innerHeight;scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(50,width/height,0.1,1000);camera.position.z=350;renderer=new THREE.WebGLRenderer();renderer.setClearColor(0x121212,1);renderer.setSize(width,height);document.body.appendChild(renderer.domElement);}},{key:'createScene',value:function createScene(assets){var texSize=512,format=THREE.RGBAFormat,channels=format===THREE.RGBFormat?3:4,len=texSize*texSize*channels,data1=new Float32Array(len),data2=new Float32Array(len),size=50;for(var i=0;i<len;i+=channels){data1[i+0]=(0,_utils.randomRange)(-size,size);data1[i+1]=(0,_utils.randomRange)(-size,size);data1[i+2]=(0,_utils.randomRange)(-size,size);data1[i+3]=0;data2[i+0]=(0,_utils.randomRange)(0.1,0.9);data2[i+1]=(0,_utils.randomInt)(1,6);data2[i+2]=0;data2[i+3]=0;}tOriginalPositions=(0,_threeUtils.getDataTexture)(data1,texSize,texSize,format);tPositions=(0,_threeUtils.getDataTexture)(data1,texSize,texSize,format);tData=(0,_threeUtils.getDataTexture)(data2,texSize,texSize,format);simulationMaterial=new THREE.ShaderMaterial({uniforms:{tOriginalPositions:{type:'t',value:tOriginalPositions},tPositions:{type:'t',value:tPositions},tData:{type:'t',value:tData},curlScale:{type:'f',value:1.5},amplitude:{type:'f',value:125},time:{type:'f',value:0},mousePosition:{type:'v3',value:mousePos},forceStrength:{type:'f',value:10000},rotation:{type:'f',value:0.05}},vertexShader:\"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    vUv = vec2(uv.x, 1.0 - uv.y);\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\",fragmentShader:\"#define GLSLIFY 1\\n//\\n// Description : Array and textureless GLSL 2D/3D/4D simplex\\n//               noise functions.\\n//      Author : Ian McEwan, Ashima Arts.\\n//  Maintainer : ijm\\n//     Lastmod : 20110822 (ijm)\\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\\n//               Distributed under the MIT License. See LICENSE file.\\n//               https://github.com/ashima/webgl-noise\\n//\\n\\nvec3 mod289(vec3 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289(vec4 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute(vec4 x) {\\n     return mod289(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt(vec4 r)\\n{\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nfloat snoise(vec3 v)\\n  {\\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\\n\\n// First corner\\n  vec3 i  = floor(v + dot(v, C.yyy) );\\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\\n\\n// Other corners\\n  vec3 g = step(x0.yzx, x0.xyz);\\n  vec3 l = 1.0 - g;\\n  vec3 i1 = min( g.xyz, l.zxy );\\n  vec3 i2 = max( g.xyz, l.zxy );\\n\\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\\n  vec3 x1 = x0 - i1 + C.xxx;\\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\\n\\n// Permutations\\n  i = mod289(i);\\n  vec4 p = permute( permute( permute(\\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\\n\\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\\n  float n_ = 0.142857142857; // 1.0/7.0\\n  vec3  ns = n_ * D.wyz - D.xzx;\\n\\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\\n\\n  vec4 x_ = floor(j * ns.z);\\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\\n\\n  vec4 x = x_ *ns.x + ns.yyyy;\\n  vec4 y = y_ *ns.x + ns.yyyy;\\n  vec4 h = 1.0 - abs(x) - abs(y);\\n\\n  vec4 b0 = vec4( x.xy, y.xy );\\n  vec4 b1 = vec4( x.zw, y.zw );\\n\\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\\n  vec4 s0 = floor(b0)*2.0 + 1.0;\\n  vec4 s1 = floor(b1)*2.0 + 1.0;\\n  vec4 sh = -step(h, vec4(0.0));\\n\\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\\n\\n  vec3 p0 = vec3(a0.xy,h.x);\\n  vec3 p1 = vec3(a0.zw,h.y);\\n  vec3 p2 = vec3(a1.xy,h.z);\\n  vec3 p3 = vec3(a1.zw,h.w);\\n\\n//Normalise gradients\\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\\n  p0 *= norm.x;\\n  p1 *= norm.y;\\n  p2 *= norm.z;\\n  p3 *= norm.w;\\n\\n// Mix final noise value\\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\\n  m = m * m;\\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\\n                                dot(p2,x2), dot(p3,x3) ) );\\n  }\\n\\nvec3 snoiseVec3( vec3 x ){\\n\\n  float s  = snoise(vec3( x ));\\n  float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\\n  float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\\n  vec3 c = vec3( s , s1 , s2 );\\n  return c;\\n\\n}\\n\\nvec3 curlNoise( vec3 p ){\\n  \\n  const float e = .1;\\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\\n\\n  vec3 p_x0 = snoiseVec3( p - dx );\\n  vec3 p_x1 = snoiseVec3( p + dx );\\n  vec3 p_y0 = snoiseVec3( p - dy );\\n  vec3 p_y1 = snoiseVec3( p + dy );\\n  vec3 p_z0 = snoiseVec3( p - dz );\\n  vec3 p_z1 = snoiseVec3( p + dz );\\n\\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\\n\\n  const float divisor = 1.0 / ( 2.0 * e );\\n  return normalize( vec3( x , y , z ) * divisor );\\n\\n}\\n\\nmat3 rotateAngleAxisMatrix(float angle, vec3 axis)\\n{\\n    float c = cos(angle);\\n    float s = sin(angle);\\n    float t = 1.0 - c;\\n    axis = normalize(axis);\\n    float x = axis.x, y = axis.y, z = axis.z;\\n    return mat3(\\n        t*x*x + c,    t*x*y + s*z,  t*x*z - s*y,\\n        t*x*y - s*z,  t*y*y + c,    t*y*z + s*x,\\n        t*x*z + s*y,  t*y*z - s*x,  t*z*z + c\\n    );\\n}\\n\\nvec3 rotateAngleAxis(float angle, vec3 axis, vec3 v)\\n{\\n    return rotateAngleAxisMatrix(angle, axis) * v;\\n}\\n\\nuniform sampler2D tOriginalPositions;\\nuniform sampler2D tPositions;\\nuniform sampler2D tData;\\nuniform float curlScale;\\nuniform float amplitude;\\nuniform float time;\\nuniform vec3 mousePosition;\\nuniform float forceStrength;\\nuniform float rotation;\\n\\nvarying vec2 vUv;\\n\\nconst vec3 yAxis = vec3(0.0, 1.0, 0.0);\\n\\nvoid main() {\\n    vec4 oPos = texture2D(tOriginalPositions, vUv);\\n    vec4 pos = texture2D(tPositions, vUv);\\n\\n    float dist = distance(oPos.xyz, pos.xyz);\\n\\n    if(dist > 150.0)\\n    {\\n        pos = oPos;\\n        pos.a = 0.0;\\n    }\\n    else\\n    {\\n        pos.xyz += curlNoise(pos.xyz / amplitude) * curlScale;\\n\\n        if(pos.a < 0.1)\\n        {\\n            pos.a += 0.001;\\n        }\\n\\n        float mid = 0.5;\\n        pos.xyz = rotateAngleAxis(rotation, yAxis, pos.xyz - mid) + mid;\\n\\n        vec3 force = mousePosition - pos.xyz;\\n        dist = length(force);\\n        float strength = forceStrength / (dist * dist);\\n        force = normalize(force) * strength;\\n\\n        pos.x -= force.x;\\n        pos.y -= force.y;\\n        pos.z -= force.z;\\n    }\\n\\n    gl_FragColor = pos;\\n}\"});renderMaterial=new THREE.ShaderMaterial({uniforms:{tOriginalPositions:{type:'t',value:tOriginalPositions},tPositions:{type:'t',value:tPositions},tData:{type:'t',value:tData},map:{type:'t',value:assets.textures.particle},pointSize:{type:'f',value:1},texSize:{type:'f',value:texSize}},vertexShader:\"#define GLSLIFY 1\\nuniform sampler2D tOriginalPositions;\\nuniform sampler2D tPositions;\\nuniform sampler2D tData;\\nuniform float pointSize;\\nuniform float texSize;\\n\\nvarying vec4 vPos;\\n\\nvoid main() {\\n\\n    vec2 uv = position.xy + vec2(0.5 / texSize, 0.5 / texSize);\\n    vec4 pos = texture2D(tPositions, uv);\\n    vPos = pos;\\n    vec4 data = texture2D(tData, uv);\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\\n    gl_PointSize = data.y;\\n}\",fragmentShader:\"#define GLSLIFY 1\\nfloat hue2rgb(float f1, float f2, float hue) {\\n    if (hue < 0.0)\\n        hue += 1.0;\\n    else if (hue > 1.0)\\n        hue -= 1.0;\\n    float res;\\n    if ((6.0 * hue) < 1.0)\\n        res = f1 + (f2 - f1) * 6.0 * hue;\\n    else if ((2.0 * hue) < 1.0)\\n        res = f2;\\n    else if ((3.0 * hue) < 2.0)\\n        res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\\n    else\\n        res = f1;\\n    return res;\\n}\\n\\nvec3 hsl2rgb(vec3 hsl) {\\n    vec3 rgb;\\n    \\n    if (hsl.y == 0.0) {\\n        rgb = vec3(hsl.z); // Luminance\\n    } else {\\n        float f2;\\n        \\n        if (hsl.z < 0.5)\\n            f2 = hsl.z * (1.0 + hsl.y);\\n        else\\n            f2 = hsl.z + hsl.y - hsl.y * hsl.z;\\n            \\n        float f1 = 2.0 * hsl.z - f2;\\n        \\n        rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\\n        rgb.g = hue2rgb(f1, f2, hsl.x);\\n        rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\\n    }   \\n    return rgb;\\n}\\n\\nvec3 hsl2rgb(float h, float s, float l) {\\n    return hsl2rgb(vec3(h, s, l));\\n}\\n\\nuniform sampler2D map;\\nvarying vec4 vPos;\\n\\nvoid main()\\n{\\n    vec3 rgb = hsl2rgb(length(vPos)/150.0, 1.0, 0.65);\\n    gl_FragColor = vec4(rgb, vPos.a) * texture2D(map, gl_PointCoord);\\n\\n    if(vPos.a < 0.05)\\n    {\\n        discard;\\n    }\\n}\",transparent:true,blending:THREE.AdditiveBlending,depthTest:false,depthWrite:false});// particles\nlen=texSize*texSize;var vertices=new Float32Array(len*3);for(var _i=0;_i<len;_i++){vertices[_i*3+0]=_i%texSize/texSize;vertices[_i*3+1]=Math.floor(_i/texSize)/texSize;}var geo=new THREE.BufferGeometry();geo.addAttribute('position',new THREE.BufferAttribute(vertices,3));mesh=new THREE.Points(geo,renderMaterial);scene.add(mesh);gpgpu=new _gpgpu2.default({renderer:renderer,simulationMaterial:simulationMaterial,renderMaterial:renderMaterial,size:texSize,format:format});}},{key:'addListeners',value:function addListeners(){window.addEventListener('resize',this.handleResize,false);window.addEventListener('orientationchange',this.handleResize,false);window.addEventListener('mousemove',this.handleMouseMove,false);}},{key:'removeListeners',value:function removeListeners(){window.removeEventListener('resize',this.handleResize);window.removeEventListener('orientationchange',this.handleResize);window.removeEventListener('mousemove',this.handleMouseMove);}},{key:'addStats',value:function addStats(){stats=new Stats();stats.domElement.style.position='absolute';stats.domElement.style.left='0px';stats.domElement.style.bottom='0px';document.body.appendChild(stats.domElement);}},{key:'handleResize',value:function handleResize(e){var width=window.innerWidth,height=window.innerHeight;camera.aspect=width/height;camera.updateProjectionMatrix();renderer.setSize(width,height);}},{key:'handleMouseMove',value:function handleMouseMove(e){mousePos.x=e.clientX/window.innerWidth*2-1;mousePos.y=-(e.clientY/window.innerHeight)*2+1;}},{key:'update',value:function update(){simulationMaterial.uniforms.time.value+=0.001;simulationMaterial.uniforms.mousePosition.value=(0,_threeUtils.getMouseWorldPos)(mousePos,camera);gpgpu.update('tPositions');renderer.render(scene,camera);if(stats){stats.update();}requestAnimationFrame(scope.update);}},{key:'dispose',value:function dispose(){removeListeners();}}]);return App;}();exports.default=App;\n\n},{\"../libs/stats.min\":3,\"../utils/loader\":5,\"../utils/three-utils\":6,\"../utils/utils\":7,\"./gpgpu\":2}],2:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var scene=void 0,camera=void 0,mesh=void 0,rtt1=void 0,rtt2=void 0,flip=false;var GPGPU=function(){function GPGPU(_ref){var renderer=_ref.renderer;var simulationMaterial=_ref.simulationMaterial;var renderMaterial=_ref.renderMaterial;var _ref$size=_ref.size;var size=_ref$size===undefined?128:_ref$size;var _ref$format=_ref.format;var format=_ref$format===undefined?THREE.RGBFormat:_ref$format;_classCallCheck(this,GPGPU);var gl=renderer.getContext();if(!gl.getExtension('OES_texture_float')){alert('No OES_texture_float support for float textures!');return;}if(gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0){alert('No support for vertex shader textures!');return;}camera=new THREE.OrthographicCamera(-0.5,0.5,0.5,-0.5,0,1);scene=new THREE.Scene();mesh=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),simulationMaterial);scene.add(mesh);var options={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,type:THREE.FloatType,format:format,// depth: false,\nstencil:false};rtt1=new THREE.WebGLRenderTarget(size,size,options);rtt2=rtt1.clone();this.renderer=renderer;this.simulationMaterial=simulationMaterial;this.renderMaterial=renderMaterial;}_createClass(GPGPU,[{key:'update',value:function update(propertyName){propertyName=propertyName||'tPositions';if(flip){this.renderer.render(scene,camera,rtt2,false);this.renderMaterial.uniforms[propertyName].value=rtt2.texture;this.simulationMaterial.uniforms[propertyName].value=rtt2.texture;}else{this.renderer.render(scene,camera,rtt1,false);this.renderMaterial.uniforms[propertyName].value=rtt1.texture;this.simulationMaterial.uniforms[propertyName].value=rtt1.texture;}flip=!flip;}}]);return GPGPU;}();exports.default=GPGPU;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol?\"symbol\":typeof obj;};// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function Stats(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a;}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++){a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+b));}return c;}function m(a){for(var b=c.children,d=0;d<b.length;d++){b[d].style.display=d===a?\"block\":\"none\";}n=a;}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\";}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length);},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),A=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b);}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function begin(){k=q();},end:function end(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*t/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c);}return a;},update:function update(){k=this.end();}};};\"object\"===(typeof module===\"undefined\"?\"undefined\":_typeof(module))&&(module.exports=Stats);\n\n},{}],4:[function(require,module,exports){\n'use strict';var _app=require('./app/app');var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}document.addEventListener('DOMContentLoaded',function(){var app=new _app2.default();},false);\n\n},{\"./app/app\":1}],5:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var interval=void 0,loadInfo=void 0,files=void 0,numFiles=void 0,numLoaded=void 0,progressCallback=void 0,loadCallback=void 0,loadCheck=void 0,scope=void 0,done=false;var Loader=function(){function Loader(){_classCallCheck(this,Loader);loadInfo={};files={textures:{},geometry:{},fonts:{},data:{}};loadCheck=this.checkLoaded;scope=this;}_createClass(Loader,[{key:'load',value:function load(manifest,onLoadCallback,onProgressCallback){progressCallback=onProgressCallback;loadCallback=onLoadCallback;numFiles=manifest.length;numLoaded=0;var scope=this;manifest.forEach(function(fileObj){if(!(Object.prototype.toString.call(fileObj.file)==='[object Array]')){if(fileObj.file.indexOf('.png')>0||fileObj.file.indexOf('.jpg')>0||fileObj.file.indexOf('.jpeg')>0||fileObj.file.indexOf('.gif')>0){scope.loadTexture(fileObj);}else if(fileObj.file.indexOf('.json')>0){if(fileObj.isData){scope.loadDataJSON(fileObj);}else if(fileObj.isFont){scope.loadFontJSON(fileObj);}else{scope.loadGeometryJSON(fileObj);}}else if(fileObj.file.indexOf('.dae')>0){scope.loadCollada(fileObj);}}else{scope.loadCubemap(fileObj);}});interval=setInterval(scope.update,1000/30);}},{key:'loadDataJSON',value:function loadDataJSON(fileObj){var xhr=new XMLHttpRequest();xhr.overrideMimeType(\"application/json\");xhr.open('GET',fileObj.file,true);xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){files.data[fileObj.id]=JSON.parse(xhr.responseText);numLoaded++;loadCheck();}};xhr.send();}},{key:'loadGeometryJSON',value:function loadGeometryJSON(fileObj){// console.log('loadGeometryJSON:', fileObj.file);\nvar loader=new THREE.JSONLoader();loadInfo[fileObj.id]={loaded:0,total:0};loader.load(fileObj.file,function(geometry){loadInfo[fileObj.id].loaded=loadInfo[fileObj.id].total;files.geometry[fileObj.id]=geometry;numLoaded++;loadCheck();},function(xhr){loadInfo[fileObj.id].loaded=xhr.loaded;loadInfo[fileObj.id].total=xhr.total;});}},{key:'loadFontJSON',value:function loadFontJSON(fileObj){var loader=new THREE.FontLoader();loadInfo[fileObj.id]={loaded:0,total:0};loader.load(fileObj.file,function(font){loadInfo[fileObj.id].loaded=loadInfo[fileObj.id].total;files.fonts[fileObj.id]=font;numLoaded++;loadCheck();},function(xhr){loadInfo[fileObj.id].loaded=xhr.loaded;loadInfo[fileObj.id].total=xhr.total;});}},{key:'loadCollada',value:function loadCollada(fileObj){// console.log('loadCollada:', fileObj.file);\nvar loader=new THREE.ColladaLoader();loadInfo[fileObj.id]={loaded:0,total:0};loader.load(fileObj.file,function(collada){loadInfo[fileObj.id].loaded=loadInfo[fileObj.id].total;files.geometry[fileObj.id]=collada;numLoaded++;loadCheck();},function(xhr){loadInfo[fileObj.id].loaded=xhr.loaded;loadInfo[fileObj.id].total=xhr.total;});}},{key:'loadTexture',value:function loadTexture(fileObj){// console.log('loadTexture:', fileObj.id, fileObj.file);\nvar loader=new THREE.TextureLoader();loadInfo[fileObj.id]={loaded:0,total:0};loader.load(fileObj.file,function(texture){loadInfo[fileObj.id].loaded=loadInfo[fileObj.id].total;files.textures[fileObj.id]=texture;numLoaded++;loadCheck();},function(xhr){loadInfo[fileObj.id].loaded=xhr.loaded;loadInfo[fileObj.id].total=xhr.total;});}},{key:'loadCubemap',value:function loadCubemap(fileObj){// console.log('loadCubemap:', fileObj.file);\nvar loader=new THREE.CubeTextureLoader();loadInfo[fileObj.id]={loaded:0,total:0};loader.load(fileObj.file,function(texture){loadInfo[fileObj.id].loaded=loadInfo[fileObj.id].total;files.textures[fileObj.id]=texture;numLoaded++;loadCheck();},function(xhr){loadInfo[fileObj.id].loaded=xhr.loaded;loadInfo[fileObj.id].total=xhr.total;});}},{key:'checkLoaded',value:function checkLoaded(){if(done)return;// console.log('checkLoaded:', numLoaded, numFiles);\nif(numLoaded===numFiles)// || percent === 1)\n{done=true;clearInterval(interval);scope.update();if(typeof loadCallback==='function'){loadCallback(files);}// dispose();\n}}},{key:'update',value:function update(){if(typeof progressCallback==='function'){var loaded=0;var total=0;for(var info in loadInfo){loaded+=parseInt(loadInfo[info].loaded);total+=parseInt(loadInfo[info].total);}// checkLoaded(loaded/total);\nif(progressCallback)progressCallback(loaded,total);}}},{key:'dispose',value:function dispose(){clearInterval(interval);interval=null;loadInfo=null;files=null;numFiles=null;numLoaded=null;progressCallback=null;loadCallback=null;done=null;}}]);return Loader;}();exports.default=Loader;\n\n},{}],6:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.degreesToRads=degreesToRads;exports.radsToDegrees=radsToDegrees;exports.getDataTexture=getDataTexture;exports.createPlane=createPlane;exports.randomRange=randomRange;exports.rotateAroundWorldAxisX=rotateAroundWorldAxisX;exports.rotateAroundWorldAxisY=rotateAroundWorldAxisY;exports.rotateAroundWorldAxisZ=rotateAroundWorldAxisZ;exports.rotateAroundWorldAxis=rotateAroundWorldAxis;exports.setScale=setScale;exports.disposeOfMesh=disposeOfMesh;exports.disposeOfChildren=disposeOfChildren;exports.removeAllChildren=removeAllChildren;exports.moveTowards=moveTowards;exports.moveVectorTowards=moveVectorTowards;exports.rotateTowards=rotateTowards;exports.updateCameraMatrices=updateCameraMatrices;exports.meshIsInView=meshIsInView;exports.getMouseIntersection=getMouseIntersection;exports.objectWorldPositionToScreen=objectWorldPositionToScreen;exports.objectWorldPositionToScreenAlt=objectWorldPositionToScreenAlt;exports.worldToScreen=worldToScreen;exports.screenToWorld=screenToWorld;exports.screenToWorldAtZ=screenToWorldAtZ;exports.getMouseWorldPos=getMouseWorldPos;exports.getMouseWorldPosAtZ=getMouseWorldPosAtZ;exports.getEdges=getEdges;exports.addFragmentFogInjections=addFragmentFogInjections;exports.pointOnSphere=pointOnSphere;exports.getPointsOnSphere=getPointsOnSphere;exports.getPointsWithinSphere=getPointsWithinSphere;exports.getPointsOnSphereEvenly=getPointsOnSphereEvenly;exports.getRandomVector3=getRandomVector3;exports.addRandomVector3=addRandomVector3;exports.rotationInDegrees=rotationInDegrees;exports.loadJSONGeometry=loadJSONGeometry;exports.loadTextures=loadTextures;exports.setTextureWrapping=setTextureWrapping;exports.setTextureMipmapping=setTextureMipmapping;exports.setTextureMinMagFilters=setTextureMinMagFilters;exports.injectShaderCode=injectShaderCode;exports.logVector=logVector;exports.logProgramInfo=logProgramInfo;var axisUp=exports.axisUp=new THREE.Vector3(0,1,0);var axisDown=exports.axisDown=new THREE.Vector3(0,-1,0);var axisLeft=exports.axisLeft=new THREE.Vector3(-1,0,0);var axisRight=exports.axisRight=new THREE.Vector3(1,0,0);var axisForward=exports.axisForward=new THREE.Vector3(0,0,1);var axisBackward=exports.axisBackward=new THREE.Vector3(0,0,-1);function degreesToRads(degrees){return degrees/180*Math.PI;}function radsToDegrees(radians){return radians*180/Math.PI;}function getDataTexture(data,width,height,format){var tex=new THREE.DataTexture(data,width,height,format,THREE.FloatType);tex.minFilter=THREE.NearestFilter;tex.magFilter=THREE.NearestFilter;tex.generateMipmaps=false;tex.needsUpdate=true;return tex;}function createPlane(width,height,color){return new THREE.Mesh(new THREE.PlaneGeometry(width||1,height||1),new THREE.MeshBasicMaterial({color:color||0xffffff}));}//export function createSphere(radius, color)\n// {\n//     // TODO\n// }\n//export function createCube(width, height, depth, color)\n// {\n//     // TODO\n// }\nfunction randomRange(min,max){return min+Math.random()*(max-min);}function rotateAroundWorldAxisX(object,radians){var matrix=new THREE.Matrix4();matrix.makeRotationX(radians);matrix.multiply(object.matrix);object.matrix=matrix;object.rotation.setFromRotationMatrix(object.matrix);}function rotateAroundWorldAxisY(object,radians){var matrix=new THREE.Matrix4();matrix.makeRotationY(radians);matrix.multiply(object.matrix);object.matrix=matrix;object.rotation.setFromRotationMatrix(object.matrix);}function rotateAroundWorldAxisZ(object,radians){var matrix=new THREE.Matrix4();matrix.makeRotationZ(radians);matrix.multiply(object.matrix);object.matrix=matrix;object.rotation.setFromRotationMatrix(object.matrix);}function rotateAroundWorldAxis(object,axis,radians){var rotWorldMatrix=new THREE.Matrix4();rotWorldMatrix.makeRotationAxis(axis.normalize(),radians);rotWorldMatrix.multiply(object.matrix);object.matrix=rotWorldMatrix;object.rotation.setFromRotationMatrix(object.matrix);}function setScale(object,scale){object.scale.set(scale,scale,scale);}function disposeOfMesh(mesh){if(!mesh)return;if(mesh.parent)mesh.parent.remove(mesh);if(mesh.geometry)mesh.geometry.dispose();if(mesh.material){if(mesh.material.map){mesh.material.map.dispose();}mesh.material.dispose();}}function disposeOfChildren(children){// console.log('disposeOfChildren:', children.length);\nif(!children)return;while(children.length>0){disposeOfMesh(children[0]);}}function removeAllChildren(object3d){while(object3d.children.length>0){object3d.remove(object3d.children[0]);}}function moveTowards(object,position,easing){object.position.x+=(position.x-object.position.x)*easing;object.position.y+=(position.y-object.position.y)*easing;object.position.z+=(position.z-object.position.z)*easing;}function moveVectorTowards(v1,v2,easing){v1.x+=(v2.x-v1.x)*easing;v1.y+=(v2.y-v1.y)*easing;v1.z+=(v2.z-v1.z)*easing;}function rotateTowards(object,rotation,easing){object.rotation.x+=(rotation.x-object.rotation.x)*easing;object.rotation.y+=(rotation.y-object.rotation.y)*easing;object.rotation.z+=(rotation.z-object.rotation.z)*easing;}function updateCameraMatrices(camera){camera.updateMatrix();camera.updateMatrixWorld();camera.matrixWorldInverse.getInverse(camera.matrixWorld);}function meshIsInView(mesh,camera,frustum){frustum=frustum||new THREE.Frustum();updateCameraMatrices(camera);mesh.updateMatrix();mesh.updateMatrixWorld();frustum.setFromMatrix(new THREE.Matrix4().multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse));return frustum.intersectsObject(mesh);}function getMouseIntersection(mouse,camera,objects,raycaster){raycaster=raycaster||new THREE.Raycaster();raycaster.setFromCamera(mouse,camera);var intersections=raycaster.intersectObjects(objects);return intersections.length>0?intersections[0]:null;}function objectWorldPositionToScreen(object,camera){updateCameraMatrices(camera);object.updateMatrixWorld();var width=window.innerWidth,height=window.innerHeight,widthHalf=width/2,heightHalf=height/2,vector=new THREE.Vector3().setFromMatrixPosition(object.matrixWorld);vector.project(camera);return{x:vector.x*widthHalf+widthHalf|0,y:-(vector.y*heightHalf)+heightHalf|0};}function objectWorldPositionToScreenAlt(object,camera){updateCameraMatrices(camera);object.updateMatrixWorld();var width=window.innerWidth,height=window.innerHeight,pos=new THREE.Vector3().setFromMatrixPosition(object.matrixWorld),projScreenMat=new THREE.Matrix4();projScreenMat.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse);pos.applyMatrix4(projScreenMat);// pos.applyProjection(projScreenMat);\nreturn{x:(pos.x+1)*width/2|0,y:(-pos.y+1)*height/2|0};}function worldToScreen(position,camera){updateCameraMatrices(camera);var width=window.innerWidth,height=window.innerHeight,widthHalf=width/2,heightHalf=height/2,vector=new THREE.Vector3().copy(position);vector.project(camera);return{x:vector.x*widthHalf+widthHalf|0,y:-(vector.y*heightHalf)+heightHalf|0};// vector.x = ( vector.x * widthHalf ) + widthHalf;\n// vector.y = - ( vector.y * heightHalf ) + heightHalf;\n// return vector;\n}function screenToWorld(position,camera){updateCameraMatrices(camera);var x=position.x/window.innerWidth*2-1,y=-(position.y/window.innerHeight)*2+1,vector=new THREE.Vector3(x,y,0.5);vector.unproject(camera);var dir=vector.sub(camera.position).normalize(),distance=-camera.position.z/dir.z;return camera.position.clone().add(dir.multiplyScalar(distance));}function screenToWorldAtZ(position,z,camera){// let x = ( position.x / window.innerWidth ) * 2 - 1,\n//     y = - ( position.y / window.innerHeight ) * 2 + 1,\n//     planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), z),\n//     vector = new THREE.Vector3(x, y, 0.5),\n//     projector = new THREE.Projector(),\n//     raycaster = projector.pickingRay(vector, camera);\n// return raycaster.ray.intersectPlane(planeZ);\nvar x=position.x/window.innerWidth*2-1,y=-(position.y/window.innerHeight)*2+1,planeZ=new THREE.Plane(new THREE.Vector3(0,0,1),z),vector=new THREE.Vector3(x,y,0.5),raycaster=new THREE.Raycaster(),pos=void 0;// raycaster.pickingRay(vector, camera);\nraycaster.setFromCamera(vector,camera);pos=raycaster.ray.intersectPlane(planeZ);return pos;}function getMouseWorldPos(mouseScreenPos,camera){// let vec = new THREE.Vector3(mouseScreenPos.x, mouseScreenPos.y, 0.5).unproject(camera);\nvar vec=mouseScreenPos.clone().unproject(camera);var dir=vec.sub(camera.position).normalize();var distance=-camera.position.z/dir.z;return camera.position.clone().add(dir.multiplyScalar(distance));}function getMouseWorldPosAtZ(mouseScreenPos,camera,z){var planeZ=new THREE.Plane(new THREE.Vector3(0,0,1),z);// let vec = new THREE.Vector3(mouseScreenPos.x, mouseScreenPos.y, 0.5);\nvar vec=mouseScreenPos;var raycaster=new THREE.Raycaster();raycaster.pickingRay(vec,camera);var pos=raycaster.ray.intersectPlane(planeZ);return pos;}function getEdges(mesh){var edge=[0,0],hash={};keys=['a','b','c'],geometry2,thresholdDot=Math.cos(THREE.Math.degToRad(1));var sortFunction=function sortFunction(a,b){return a-b;};if(mesh.geometry instanceof THREE.BufferGeometry){geometry2=new THREE.Geometry();geometry2.fromBufferGeometry(mesh.geometry);}else{geometry2=mesh.geometry.clone();}geometry2.mergeVertices();geometry2.computeFaceNormals();var vertices=geometry2.vertices,faces=geometry2.faces,facesOriginal=mesh.geometry.faces,key=void 0;for(var _i=0,l=faces.length;_i<l;_i++){var face=faces[_i];for(var j=0;j<3;j++){edge[0]=face[keys[j]];edge[1]=face[keys[(j+1)%3]];edge.sort(sortFunction);key=edge.toString();if(hash[key]===undefined){hash[key]={vert1:edge[0],vert2:edge[1],face1:_i,face2:undefined};}else{hash[key].face2=_i;}}}var edges=[];for(key in hash){var h=hash[key];if(h.face2===undefined||faces[h.face1].normal.dot(faces[h.face2].normal)<=thresholdDot){edges.push({vertex1:vertices[h.vert1],vertex2:vertices[h.vert2],// face1:faces[ h.face1 ],\n// face2:faces[ h.face2 ],\nface1:facesOriginal[h.face1],face2:facesOriginal[h.face2],faceIndex1:h.face1,faceIndex2:h.face2});}}return edges;}function addFragmentFogInjections(fragmentShader){var lines=fragmentShader.split('\\n'),len=lines.length;for(var _i2=0;_i2<len;_i2++){if(lines[_i2]==='/*#FOG_INJECTION_1#*/'){lines[_i2]=THREE.ShaderChunk['fog_pars_fragment'];}else if(lines[_i2]==='/*#FOG_INJECTION_2#*/'){lines[_i2]=THREE.ShaderChunk['fog_fragment'];}}return lines.join('\\n');}function pointOnSphere(r,a1,a2){return{x:r*Math.cos(a1)*Math.sin(a2),y:r*Math.sin(a1)*Math.sin(a2),z:r*Math.cos(a2)};}function getPointsOnSphere(n){var pts=[],pt=void 0;for(var _i3=0;_i3<n;_i3++){pt=pointOnSphere(1,Math.random()*Math.PI*2,Math.random()*Math.PI*2);pts.push(new THREE.Vector3(pt.x,pt.y,pt.z));}return pts;}function getPointsWithinSphere(n,maxRadius){var pts=[],pt=void 0;for(var _i4=0;_i4<n;_i4++){pt=pointOnSphere(Math.random()*maxRadius,Math.random()*Math.PI*2,Math.random()*Math.PI*2);pts.push(new THREE.Vector3(pt.x,pt.y,pt.z));}return pts;}function getPointsOnSphereEvenly(n){var pts=[],inc=Math.PI*(3-Math.sqrt(5)),off=2.0/n,x=void 0,y=void 0,z=void 0,r=void 0,phi=void 0;for(var k=0;k<n;k++){y=k*off-1+off/2;r=Math.sqrt(1-y*y);phi=k*inc;x=Math.cos(phi)*r;z=Math.sin(phi)*r;pts.push(new THREE.Vector3(x,y,z));}return pts;}function getRandomVector3(min,max){return new THREE.Vector3(randomRange(min,max),randomRange(min,max),randomRange(min,max));}function addRandomVector3(vec,min,max){return getRandomVector3(min,max).add(vec);}function rotationInDegrees(rotation){var degrees=180/Math.PI;return new THREE.Euler(rotation.x*degrees,rotation.y*degrees,rotation.z*degrees,rotation.order);}function loadJSONGeometry(manifest,callback){var loader=new THREE.JSONLoader(),len=manifest.length,loaded=0,file=void 0,id=void 0,geometriesById={};geometries=[];var load=function load(){file=manifest[loaded].file!==undefined?manifest[loaded].file:manifest[loaded];id=manifest[loaded].id!==undefined?manifest[loaded].id:null;loader.load(file,function(g){if(id){geometriesById[id]=g;}geometries.push({geometry:g,id:id});loaded++;if(loaded===len){if(typeof callback==='function'){callback(geometries,geometriesById);}}else{load();}});};load();}function loadTextures(manifest,callback){var len=manifest.length,loaded=0,file=void 0,id=void 0,texturesById={};textures=[],loader=new THREE.TextureLoader();loader.crossOrigin=\"\";var load=function load(){file=manifest[loaded].file!==undefined?manifest[loaded].file:manifest[loaded];id=manifest[loaded].id!==undefined?manifest[loaded].id:null;loader.load(file,function(tex){if(id){texturesById[id]=tex;}textures.push({texture:tex,id:id});loaded++;if(loaded===len){if(typeof callback==='function'){callback(textures,texturesById);}}else{load();}});// THREE.ImageUtils.loadTexture(file, undefined, function(tex){\n//     if(id)\n//     {\n//         texturesById[id] = tex;\n//     }\n//     textures.push({texture:tex, id:id});\n//     loaded++;\n//     if(loaded === len)\n//     {\n//         if(typeof callback === 'function')\n//         {\n//             callback(textures, texturesById);\n//         }\n//     }\n//     else\n//     {\n//         load();\n//     }\n// });\n};load();}function setTextureWrapping(textures,wrapping){for(var _i5=0;_i5<textures.length;_i5++){textures[_i5].wrapS=textures[_i5].wrapT=wrapping;textures[_i5].needsUpdate=true;}}function setTextureMipmapping(textures,mipmapping){for(var _i6=0;_i6<textures.length;_i6++){textures[_i6].generateMipmaps=mipmapping;textures[_i6].needsUpdate=true;}}function setTextureMinMagFilters(textures,minFilter,magFilter){for(var _i7=0;_i7<textures.length;_i7++){if(minFilter)textures[_i7].minFilter=minFilter;if(magFilter)textures[_i7].magFilter=magFilter;textures[_i7].needsUpdate=true;}}function injectShaderCode(original,key,injection){if(Object.prototype.toString.call(injection)==='[object Array]'){var replacement='';for(var _i8=0;_i8<injection.length;_i8++){replacement+=injection[_i8]+'\\n';}return original.replace(key,replacement);}else{return original.replace(key,injection);}}function logVector(vector){console.log(vector.x,vector.y,vector.z);}// usage: pass renderer.getContext() & mesh.material.program.program, call render at least once first.\nfunction logProgramInfo(gl,program){var result={attributes:[],uniforms:[],attributeCount:0,uniformCount:0};activeUniforms=gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS),activeAttributes=gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES);// Taken from the WebGl spec:\n// http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14\nvar enums={0x8B50:'FLOAT_VEC2',0x8B51:'FLOAT_VEC3',0x8B52:'FLOAT_VEC4',0x8B53:'INT_VEC2',0x8B54:'INT_VEC3',0x8B55:'INT_VEC4',0x8B56:'BOOL',0x8B57:'BOOL_VEC2',0x8B58:'BOOL_VEC3',0x8B59:'BOOL_VEC4',0x8B5A:'FLOAT_MAT2',0x8B5B:'FLOAT_MAT3',0x8B5C:'FLOAT_MAT4',0x8B5E:'SAMPLER_2D',0x8B60:'SAMPLER_CUBE',0x1400:'BYTE',0x1401:'UNSIGNED_BYTE',0x1402:'SHORT',0x1403:'UNSIGNED_SHORT',0x1404:'INT',0x1405:'UNSIGNED_INT',0x1406:'FLOAT'};// Loop through active uniforms\nfor(var _i9=0;_i9<activeUniforms;_i9++){var uniform=gl.getActiveUniform(program,_i9);uniform.typeName=enums[uniform.type];result.uniforms.push(uniform);result.uniformCount+=uniform.size;}// Loop through active attributes\nfor(i=0;i<activeAttributes;i++){var attribute=gl.getActiveAttrib(program,i);attribute.typeName=enums[attribute.type];result.attributes.push(attribute);result.attributeCount+=attribute.size;}console.log(result);}\n\n},{}],7:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.createElement=createElement;exports.normalize=normalize;exports.lerp=lerp;exports.map=map;exports.clamp=clamp;exports.distance=distance;exports.distanceXY=distanceXY;exports.circleCollision=circleCollision;exports.circlePointCollision=circlePointCollision;exports.pointInRect=pointInRect;exports.inRange=inRange;exports.rangeIntersect=rangeIntersect;exports.rectIntersect=rectIntersect;exports.degreesToRads=degreesToRads;exports.radsToDegrees=radsToDegrees;exports.angleBetweenPoints=angleBetweenPoints;exports.randomRange=randomRange;exports.randomInt=randomInt;exports.roundToPlaces=roundToPlaces;exports.roundNearest=roundNearest;exports.quadraticBezier=quadraticBezier;exports.cubicBezier=cubicBezier;exports.multicurve=multicurve;exports.pointOnSphere=pointOnSphere;exports.getPointsOnSphere=getPointsOnSphere;exports.getPointsOnSphereEvenly=getPointsOnSphereEvenly;exports.clone=clone;exports.isArray=isArray;exports.shuffleArray=shuffleArray;exports.thinOutArray=thinOutArray;exports.randomItemFromArray=randomItemFromArray;exports.arrayRestrictedToRangeZ=arrayRestrictedToRangeZ;exports.extractKeyFromArray=extractKeyFromArray;exports.repeat=repeat;exports.isOpera=isOpera;exports.isFirefox=isFirefox;exports.isSafari=isSafari;exports.isChrome=isChrome;exports.isIE=isIE;exports.isMac=isMac;exports.isWindows=isWindows;exports.hasWebGL=hasWebGL;exports.getVideoType=getVideoType;exports.dispatchEvent=dispatchEvent;exports.setCursor=setCursor;exports.getParameterByName=getParameterByName;function createElement(type,classNames,content){type=type||'div';var el=document.createElement(type);if(classNames){classNames.forEach(function(name){el.classList.add(name);});}if(content)el.innerHTML=content;return el;}function normalize(value,min,max){return(value-min)/(max-min);}function lerp(norm,min,max){return(max-min)*norm+min;}function map(value,sourceMin,sourceMax,destMin,destMax){return lerp(normalize(value,sourceMin,sourceMax),destMin,destMax);}function clamp(value,min,max){return Math.min(Math.max(value,Math.min(min,max)),Math.max(min,max));}function distance(p0,p1){var dx=p1.x-p0.x,dy=p1.y-p0.y;return Math.sqrt(dx*dx+dy*dy);}function distanceXY(x0,y0,x1,y1){var dx=x1-x0,dy=y1-y0;return Math.sqrt(dx*dx+dy*dy);}function circleCollision(c0,c1){return distance(c0,c1)<=c0.radius+c1.radius;}function circlePointCollision(x,y,circle){return distanceXY(x,y,circle.x,circle.y)<circle.radius;}function pointInRect(x,y,rect){return inRange(x,rect.x,rect.x+rect.width)&&inRange(y,rect.y,rect.y+rect.height);}function inRange(value,min,max){return value>=Math.min(min,max)&&value<=Math.max(min,max);}function rangeIntersect(min0,max0,min1,max1){return Math.max(min0,max0)>=Math.min(min1,max1)&&Math.min(min0,max0)<=Math.max(min1,max1);}function rectIntersect(r0,r1){return rangeIntersect(r0.x,r0.x+r0.width,r1.x,r1.x+r1.width)&&rangeIntersect(r0.y,r0.y+r0.height,r1.y,r1.y+r1.height);}function degreesToRads(degrees){return degrees/180*Math.PI;}function radsToDegrees(radians){return radians*180/Math.PI;}function angleBetweenPoints(p1,p2){return Math.atan2(p2.y-p1.y,p2.x-p1.x);}function randomRange(min,max){return min+Math.random()*(max-min);}function randomInt(min,max){return Math.floor(min+Math.random()*(max-min+1));}function roundToPlaces(value,places){var mult=Math.pow(10,places);return Math.round(value*mult)/mult;}function roundNearest(value,nearest){return Math.round(value/nearest)*nearest;}function quadraticBezier(p0,p1,p2,t,pFinal){pFinal=pFinal||{};pFinal.x=Math.pow(1-t,2)*p0.x+(1-t)*2*t*p1.x+t*t*p2.x;pFinal.y=Math.pow(1-t,2)*p0.y+(1-t)*2*t*p1.y+t*t*p2.y;return pFinal;}function cubicBezier(p0,p1,p2,p3,t,pFinal){pFinal=pFinal||{};pFinal.x=Math.pow(1-t,3)*p0.x+Math.pow(1-t,2)*3*t*p1.x+(1-t)*3*t*t*p2.x+t*t*t*p3.x;pFinal.y=Math.pow(1-t,3)*p0.y+Math.pow(1-t,2)*3*t*p1.y+(1-t)*3*t*t*p2.y+t*t*t*p3.y;return pFinal;}function multicurve(points,context){var p0=void 0,p1=void 0,midx=void 0,midy=void 0;context.moveTo(points[0].x,points[0].y);for(var i=1;i<points.length-2;i+=1){p0=points[i];p1=points[i+1];midx=(p0.x+p1.x)/2;midy=(p0.y+p1.y)/2;context.quadraticCurveTo(p0.x,p0.y,midx,midy);}p0=points[points.length-2];p1=points[points.length-1];context.quadraticCurveTo(p0.x,p0.y,p1.x,p1.y);}function pointOnSphere(r,a1,a2){return{x:r*Math.cos(a1)*Math.sin(a2),y:r*Math.sin(a1)*Math.sin(a2),z:r*Math.cos(a2)};}function getPointsOnSphere(n){var pts=[],pt=void 0;for(var i=0;i<n;i++){pt=pointOnSphere(1,Math.random()*Math.PI*2,Math.random()*Math.PI*2);pts.push({x:pt.x,y:pt.y,z:pt.z});}return pts;}function getPointsOnSphereEvenly(n){var pts=[],inc=Math.PI*(3-Math.sqrt(5)),off=2.0/n,x=void 0,y=void 0,z=void 0,r=void 0,phi=void 0;for(var k=0;k<n;k++){y=k*off-1+off/2;r=Math.sqrt(1-y*y);phi=k*inc;x=Math.cos(phi)*r;z=Math.sin(phi)*r;pts.push({x:x,y:y,z:z});}return pts;}function clone(obj){return JSON.parse(JSON.stringify(obj));}function isArray(arg){return Object.prototype.toString.call(arg)==='[object Array]';}function shuffleArray(array){var currentIndex=array.length,temporaryValue=void 0,randomIndex=void 0;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}return array;}function thinOutArray(array,n){var newArray=[],len=array.length;for(var i=0;i<len;i+=n){newArray.push(array[i]);}return newArray;}function randomItemFromArray(array){return array[Math.random()*array.length|0];}function arrayRestrictedToRangeZ(array,minZ,maxZ){var newArray=[],len=array.length;for(var i=0;i<len;i++){if(inRange(array[i].z,minZ,maxZ))newArray.push(array[i]);}return newArray;}function extractKeyFromArray(array,key){var a=[];for(var i=0;i<array.length;i++){a.push(array[i][key]);}return a;}function repeat(callback,params,intervals,delay,startDelay){startDelay=startDelay||0;var i=0;var doStuff=function doStuff(){setTimeout(function(){callback(params);i++;if(i<intervals)doStuff();},delay);};setTimeout(function(){doStuff();},startDelay);}function isOpera(){// Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)\nreturn!!window.opera||navigator.userAgent.indexOf(' OPR/')>=0;}function isFirefox(){// Firefox 1.0+\nreturn typeof InstallTrigger!=='undefined';}function isSafari(){// At least Safari 3+: '[object HTMLElementConstructor]'\nreturn Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0;}function isChrome(){// Chrome 1+\nreturn!!window.chrome&&!isOpera();}function isIE(){// At least IE6\nreturn false||!!document.documentMode;}function isMac(){return navigator.platform.toLowerCase().indexOf('mac')>-1;}function isWindows(){return navigator.platform.toLowerCase().indexOf('win')>-1;}function hasWebGL(){if(!!window.WebGLRenderingContext){var canvas=document.createElement('canvas'),names=['webgl','experimental-webgl','moz-webgl','webkit-3d'],context=false;for(var i=0;i<4;i++){try{context=canvas.getContext(names[i]);if(context&&typeof context.getParameter==='function'){// WebGL is enabled\nreturn true;}}catch(e){}}// WebGL is supported, but disabled\nreturn false;}// WebGL not supported\nreturn false;}function getVideoType(file){if(file.indexOf('.mp4')!==-1)return'video/mp4';else if(file.indexOf('.webm')!==-1)return'video/webm';else if(file.indexOf('.ogg')!==-1)return'video/ogg';}function dispatchEvent(eventName,config){config=config||null;var event=void 0;if(!isIE()){event=new CustomEvent(eventName,{detail:config});document.dispatchEvent(event);}else{event=document.createEvent('CustomEvent');event.initCustomEvent(eventName,true,false,config);document.dispatchEvent(event);}}function setCursor(cursor,element){element=element||document.body;if(element.style.cursor!==cursor){element.style.cursor=cursor;}}function getParameterByName(name){name=name.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\");var regex=new RegExp(\"[\\\\?&]\"+name+\"=([^&#]*)\"),results=regex.exec(location.search);return results===null?\"\":decodeURIComponent(results[1].replace(/\\+/g,\" \"));}\n\n},{}]},{},[4])\n\n","'use strict';\n\nlet scene,\n    camera,\n    mesh,\n    rtt1,\n    rtt2,\n    flip = false;\n\nexport default class GPGPU\n{\n    constructor({renderer, simulationMaterial, renderMaterial, size = 128, format = THREE.RGBFormat})\n    {\n        const gl = renderer.getContext();\n\n        if(!gl.getExtension('OES_texture_float'))\n        {\n            alert('No OES_texture_float support for float textures!');\n            return;\n        }\n\n        if(gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) === 0)\n        {\n            alert('No support for vertex shader textures!');\n            return;\n        }\n\n        camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, 0, 1);\n\n        scene = new THREE.Scene();\n\n        mesh = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), simulationMaterial);\n        scene.add(mesh);\n\n        const options = {\n            minFilter: THREE.NearestFilter,\n            magFilter: THREE.NearestFilter,\n            type: THREE.FloatType,\n            format: format,\n            // depth: false,\n            stencil: false\n        };\n        rtt1 = new THREE.WebGLRenderTarget(size, size, options);\n        rtt2 = rtt1.clone();\n\n        this.renderer = renderer;\n        this.simulationMaterial = simulationMaterial;\n        this.renderMaterial = renderMaterial;\n    }\n\n    update(propertyName)\n    {\n        propertyName = propertyName || 'tPositions';\n\n        if(flip)\n        {\n            this.renderer.render(scene, camera, rtt2, false);\n            this.renderMaterial.uniforms[propertyName].value = rtt2.texture;\n            this.simulationMaterial.uniforms[propertyName].value = rtt2.texture;\n        }\n        else\n        {\n            this.renderer.render(scene, camera, rtt1, false);\n            this.renderMaterial.uniforms[propertyName].value = rtt1.texture;\n            this.simulationMaterial.uniforms[propertyName].value = rtt1.texture;\n        }\n\n        flip = !flip;\n    }\n}","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+\nb));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?\"block\":\"none\";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),\nA=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*\nt/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c)}return a},update:function(){k=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n","'use strict';\n\nimport App from './app/app';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const app = new App();\n}, false);","'use strict';\n\nlet interval,\n    loadInfo,\n    files,\n    numFiles,\n    numLoaded,\n    progressCallback,\n    loadCallback,\n    loadCheck,\n    scope,\n    done = false;\n\nexport default class Loader\n{\n    constructor()\n    {\n        loadInfo = {};\n        files = {textures:{}, geometry:{}, fonts:{}, data:{}};\n        loadCheck = this.checkLoaded;\n        scope = this;\n    }\n\n    load(manifest, onLoadCallback, onProgressCallback)\n    {\n        progressCallback = onProgressCallback;\n        loadCallback = onLoadCallback;\n\n        numFiles = manifest.length;\n        numLoaded = 0;\n\n        const scope = this;\n\n        manifest.forEach(function(fileObj){\n            if(!(Object.prototype.toString.call(fileObj.file) === '[object Array]'))\n            {\n                if(fileObj.file.indexOf('.png') > 0 || fileObj.file.indexOf('.jpg') > 0 || fileObj.file.indexOf('.jpeg') > 0 || fileObj.file.indexOf('.gif') > 0)\n                {\n                    scope.loadTexture(fileObj);\n                }\n                else if(fileObj.file.indexOf('.json') > 0)\n                {\n                    if(fileObj.isData)\n                    {\n                        scope.loadDataJSON(fileObj);\n                    }\n                    else if(fileObj.isFont)\n                    {\n                        scope.loadFontJSON(fileObj);\n                    }\n                    else\n                    {\n                        scope.loadGeometryJSON(fileObj);\n                    }\n                }\n                else if(fileObj.file.indexOf('.dae') > 0)\n                {\n                    scope.loadCollada(fileObj);\n                }\n            }\n            else\n            {\n                scope.loadCubemap(fileObj)\n            }\n        });\n\n        interval = setInterval(scope.update, 1000/30);\n    }\n\n    loadDataJSON(fileObj)\n    {\n        const xhr = new XMLHttpRequest();\n        xhr.overrideMimeType(\"application/json\");\n        xhr.open('GET', fileObj.file, true);\n        xhr.onreadystatechange = function() {\n            if(xhr.readyState === 4 && xhr.status === 200)\n            {\n                files.data[fileObj.id] = JSON.parse(xhr.responseText);\n                numLoaded++;\n                loadCheck();\n            }\n        };\n        xhr.send();\n    }\n\n    loadGeometryJSON(fileObj)\n    {\n        // console.log('loadGeometryJSON:', fileObj.file);\n\n        const loader = new THREE.JSONLoader();\n        loadInfo[fileObj.id] = {loaded:0, total:0}\n\n        loader.load(fileObj.file, function(geometry){\n            loadInfo[fileObj.id].loaded = loadInfo[fileObj.id].total;\n            files.geometry[fileObj.id] = geometry;\n            numLoaded++;\n            loadCheck();\n        }, function(xhr){\n            loadInfo[fileObj.id].loaded = xhr.loaded;\n            loadInfo[fileObj.id].total = xhr.total;\n        });\n    }\n\n    loadFontJSON(fileObj)\n    {\n        const loader = new THREE.FontLoader();\n        loadInfo[fileObj.id] = {loaded:0, total:0}\n\n        loader.load(fileObj.file, function(font){\n            loadInfo[fileObj.id].loaded = loadInfo[fileObj.id].total;\n            files.fonts[fileObj.id] = font;\n            numLoaded++;\n            loadCheck();\n        }, function(xhr){\n            loadInfo[fileObj.id].loaded = xhr.loaded;\n            loadInfo[fileObj.id].total = xhr.total;\n        });\n    }\n\n    loadCollada(fileObj)\n    {\n        // console.log('loadCollada:', fileObj.file);\n\n        const loader = new THREE.ColladaLoader();\n        loadInfo[fileObj.id] = {loaded:0, total:0}\n\n        loader.load(fileObj.file, function(collada){\n            loadInfo[fileObj.id].loaded = loadInfo[fileObj.id].total;\n            files.geometry[fileObj.id] = collada;\n            numLoaded++;\n            loadCheck();\n        }, function(xhr){\n            loadInfo[fileObj.id].loaded = xhr.loaded;\n            loadInfo[fileObj.id].total = xhr.total;\n        });\n    }\n\n    loadTexture(fileObj)\n    {\n        // console.log('loadTexture:', fileObj.id, fileObj.file);\n\n        const loader = new THREE.TextureLoader();\n        loadInfo[fileObj.id] = {loaded:0, total:0}\n\n        loader.load(fileObj.file, function(texture){\n            loadInfo[fileObj.id].loaded = loadInfo[fileObj.id].total;\n            files.textures[fileObj.id] = texture;\n            numLoaded++;\n            loadCheck();\n        }, function(xhr){\n            loadInfo[fileObj.id].loaded = xhr.loaded;\n            loadInfo[fileObj.id].total = xhr.total;\n        });\n    }\n\n    loadCubemap(fileObj)\n    {\n        // console.log('loadCubemap:', fileObj.file);\n\n        const loader = new THREE.CubeTextureLoader();\n        loadInfo[fileObj.id] = {loaded:0, total:0}\n\n        loader.load(fileObj.file, function(texture){\n            loadInfo[fileObj.id].loaded = loadInfo[fileObj.id].total;\n            files.textures[fileObj.id] = texture;\n            numLoaded++;\n            loadCheck();\n        }, function(xhr){\n            loadInfo[fileObj.id].loaded = xhr.loaded;\n            loadInfo[fileObj.id].total = xhr.total;\n        });\n    }\n\n    checkLoaded()\n    {\n        if(done) return;\n\n        // console.log('checkLoaded:', numLoaded, numFiles);\n        if(numLoaded === numFiles)// || percent === 1)\n        {\n            done = true;\n            clearInterval(interval);\n            scope.update();\n\n            if(typeof loadCallback === 'function')\n            {\n                loadCallback(files);\n            }\n\n            // dispose();\n        }\n    }\n\n    update()\n    {\n        if(typeof progressCallback === 'function')\n        {\n            let loaded = 0;\n            let total = 0;\n\n            for(let info in loadInfo)\n            {\n                loaded += parseInt(loadInfo[info].loaded);\n                total += parseInt(loadInfo[info].total);\n            }\n\n            // checkLoaded(loaded/total);\n\n            if(progressCallback) progressCallback(loaded, total);\n        }\n    }\n\n    dispose()\n    {\n        clearInterval(interval);\n\n        interval = null;\n        loadInfo = null;\n        files = null;\n        numFiles = null;\n        numLoaded = null;\n        progressCallback = null;\n        loadCallback = null;\n        done = null;\n    }\n}\n","'use strict';\n\nexport const axisUp = new THREE.Vector3(0, 1, 0);\nexport const axisDown = new THREE.Vector3(0, -1, 0);\nexport const axisLeft = new THREE.Vector3(-1, 0, 0);\nexport const axisRight = new THREE.Vector3(1, 0, 0);\nexport const axisForward = new THREE.Vector3(0, 0, 1);\nexport const axisBackward = new THREE.Vector3(0, 0, -1);\n\nexport function degreesToRads(degrees)\n{\n    return degrees / 180 * Math.PI;\n}\n\nexport function radsToDegrees(radians)\n{\n    return radians * 180 / Math.PI;\n}\n\nexport function getDataTexture(data, width, height, format)\n{\n    let tex = new THREE.DataTexture(data, width, height, format, THREE.FloatType);\n    tex.minFilter = THREE.NearestFilter;\n    tex.magFilter = THREE.NearestFilter;\n    tex.generateMipmaps = false;\n    tex.needsUpdate = true;\n    return tex;\n}\n\nexport function createPlane(width, height, color)\n{\n    return new THREE.Mesh(\n        new THREE.PlaneGeometry(width || 1, height || 1),\n        new THREE.MeshBasicMaterial({color:color || 0xffffff})\n    );\n}\n\n//export function createSphere(radius, color)\n// {\n//     // TODO\n// }\n\n//export function createCube(width, height, depth, color)\n// {\n//     // TODO\n// }\n\nexport function randomRange(min, max)\n{\n    return min + Math.random() * (max - min);\n}\n\nexport function rotateAroundWorldAxisX(object, radians)\n{\n    let matrix = new THREE.Matrix4();\n    matrix.makeRotationX(radians);\n    matrix.multiply(object.matrix);\n    object.matrix = matrix;\n    object.rotation.setFromRotationMatrix(object.matrix);\n}\n\nexport function rotateAroundWorldAxisY(object, radians)\n{\n    let matrix = new THREE.Matrix4();\n    matrix.makeRotationY(radians);\n    matrix.multiply(object.matrix);\n    object.matrix = matrix;\n    object.rotation.setFromRotationMatrix(object.matrix);\n}\n\nexport function rotateAroundWorldAxisZ(object, radians)\n{\n    let matrix = new THREE.Matrix4();\n    matrix.makeRotationZ(radians);\n    matrix.multiply(object.matrix);\n    object.matrix = matrix;\n    object.rotation.setFromRotationMatrix(object.matrix);\n}\n\nexport function rotateAroundWorldAxis(object, axis, radians)\n{\n    let rotWorldMatrix = new THREE.Matrix4();\n    rotWorldMatrix.makeRotationAxis(axis.normalize(), radians);\n    rotWorldMatrix.multiply(object.matrix);\n    object.matrix = rotWorldMatrix;\n    object.rotation.setFromRotationMatrix(object.matrix);\n}\n\nexport function setScale(object, scale)\n{\n    object.scale.set(scale, scale, scale);\n}\n\nexport function disposeOfMesh(mesh)\n{\n    if(!mesh) return;\n\n    if(mesh.parent) mesh.parent.remove(mesh);\n    if(mesh.geometry) mesh.geometry.dispose();\n    if(mesh.material)\n    {\n        if(mesh.material.map)\n        {\n            mesh.material.map.dispose();\n        }\n        mesh.material.dispose();\n    }\n}\n\nexport function disposeOfChildren(children)\n{\n    // console.log('disposeOfChildren:', children.length);\n\n    if(!children) return;\n\n    while(children.length > 0)\n    {\n        disposeOfMesh(children[0]);\n    }\n}\n\nexport function removeAllChildren(object3d)\n{\n    while(object3d.children.length > 0)\n    {\n        object3d.remove(object3d.children[0]);\n    }\n}\n\nexport function moveTowards(object, position, easing)\n{\n    object.position.x += (position.x - object.position.x) * easing;\n    object.position.y += (position.y - object.position.y) * easing;\n    object.position.z += (position.z - object.position.z) * easing;\n}\n\nexport function moveVectorTowards(v1, v2, easing)\n{\n    v1.x += (v2.x - v1.x) * easing;\n    v1.y += (v2.y - v1.y) * easing;\n    v1.z += (v2.z - v1.z) * easing;\n}\n\nexport function rotateTowards(object, rotation, easing)\n{\n    object.rotation.x += (rotation.x - object.rotation.x) * easing;\n    object.rotation.y += (rotation.y - object.rotation.y) * easing;\n    object.rotation.z += (rotation.z - object.rotation.z) * easing;\n}\n\nexport function updateCameraMatrices(camera)\n{\n    camera.updateMatrix();\n    camera.updateMatrixWorld();\n    camera.matrixWorldInverse.getInverse(camera.matrixWorld);\n}\n\nexport function meshIsInView(mesh, camera, frustum)\n{\n    frustum = frustum || new THREE.Frustum();\n    updateCameraMatrices(camera);\n\n    mesh.updateMatrix();\n    mesh.updateMatrixWorld();\n\n    frustum.setFromMatrix( new THREE.Matrix4().multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse ) );\n    return frustum.intersectsObject(mesh);\n}\n\nexport function getMouseIntersection(mouse, camera, objects, raycaster)\n{\n    raycaster = raycaster || new THREE.Raycaster();\n\n    raycaster.setFromCamera(mouse, camera);\n    let intersections = raycaster.intersectObjects(objects);\n    return intersections.length > 0 ? intersections[0] : null;\n}\n\nexport function objectWorldPositionToScreen(object, camera)\n{\n    updateCameraMatrices(camera);\n    object.updateMatrixWorld();\n\n    let width = window.innerWidth, height = window.innerHeight,\n        widthHalf = width / 2, heightHalf = height / 2,\n        vector = new THREE.Vector3().setFromMatrixPosition(object.matrixWorld);\n\n    vector.project(camera);\n    return {\n        x:(vector.x * widthHalf) + widthHalf | 0,\n        y:-(vector.y * heightHalf) + heightHalf | 0\n    };\n}\n\nexport function objectWorldPositionToScreenAlt(object, camera)\n{\n    updateCameraMatrices(camera);\n    object.updateMatrixWorld();\n\n    let width = window.innerWidth, height = window.innerHeight,\n        pos = new THREE.Vector3().setFromMatrixPosition(object.matrixWorld),\n        projScreenMat = new THREE.Matrix4();\n\n        projScreenMat.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n        pos.applyMatrix4(projScreenMat);\n        // pos.applyProjection(projScreenMat);\n\n\n        return {\n            x: ((pos.x + 1) * width / 2) | 0,\n            y: ((-pos.y + 1) * height / 2) | 0\n        };\n}\n\nexport function worldToScreen(position, camera)\n{\n    updateCameraMatrices(camera);\n\n    let width = window.innerWidth, height = window.innerHeight,\n        widthHalf = width / 2, heightHalf = height / 2,\n        vector = new THREE.Vector3().copy(position);\n\n    vector.project(camera);\n    return {\n        x:(vector.x * widthHalf) + widthHalf | 0,\n        y:-(vector.y * heightHalf) + heightHalf | 0\n    };\n\n    // vector.x = ( vector.x * widthHalf ) + widthHalf;\n    // vector.y = - ( vector.y * heightHalf ) + heightHalf;\n    // return vector;\n}\n\nexport function screenToWorld(position, camera)\n{\n    updateCameraMatrices(camera);\n\n    let x = ( position.x / window.innerWidth ) * 2 - 1,\n        y = - ( position.y / window.innerHeight ) * 2 + 1,\n        vector = new THREE.Vector3(x, y, 0.5);\n\n    vector.unproject(camera);\n\n    let dir = vector.sub( camera.position ).normalize(),\n        distance = - camera.position.z / dir.z;\n\n    return camera.position.clone().add( dir.multiplyScalar( distance ) );\n}\n\nexport function screenToWorldAtZ(position, z, camera)\n{\n    // let x = ( position.x / window.innerWidth ) * 2 - 1,\n    //     y = - ( position.y / window.innerHeight ) * 2 + 1,\n    //     planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), z),\n    //     vector = new THREE.Vector3(x, y, 0.5),\n    //     projector = new THREE.Projector(),\n    //     raycaster = projector.pickingRay(vector, camera);\n\n    // return raycaster.ray.intersectPlane(planeZ);\n\n    let x = ( position.x / window.innerWidth ) * 2 - 1,\n        y = - ( position.y / window.innerHeight ) * 2 + 1,\n        planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), z),\n        vector = new THREE.Vector3(x, y, 0.5),\n        raycaster = new THREE.Raycaster(),\n        pos;\n\n    // raycaster.pickingRay(vector, camera);\n    raycaster.setFromCamera(vector, camera);\n    pos = raycaster.ray.intersectPlane(planeZ);\n    return pos;\n}\n\nexport function getMouseWorldPos(mouseScreenPos, camera)\n{\n    // let vec = new THREE.Vector3(mouseScreenPos.x, mouseScreenPos.y, 0.5).unproject(camera);\n    let vec = mouseScreenPos.clone().unproject(camera);\n    let dir = vec.sub( camera.position ).normalize();\n    let distance = - camera.position.z / dir.z;\n    return camera.position.clone().add( dir.multiplyScalar( distance ) );\n}\n\nexport function getMouseWorldPosAtZ(mouseScreenPos, camera, z)\n{\n    let planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), z);\n    // let vec = new THREE.Vector3(mouseScreenPos.x, mouseScreenPos.y, 0.5);\n    let vec = mouseScreenPos;\n    let raycaster = new THREE.Raycaster();\n    raycaster.pickingRay(vec, camera);\n    let pos = raycaster.ray.intersectPlane(planeZ);\n    return pos;\n}\n\nexport function getEdges(mesh)\n{\n    let edge = [ 0, 0 ],\n        hash = {}\n        keys = [ 'a', 'b', 'c' ],\n        geometry2,\n        thresholdDot = Math.cos( THREE.Math.degToRad( 1 ) );\n\n    let sortFunction = function ( a, b ) { return a - b; };\n\n    if ( mesh.geometry instanceof THREE.BufferGeometry ) {\n        geometry2 = new THREE.Geometry();\n        geometry2.fromBufferGeometry( mesh.geometry );\n    } else {\n        geometry2 = mesh.geometry.clone();\n    }\n    geometry2.mergeVertices();\n    geometry2.computeFaceNormals();\n\n    let vertices = geometry2.vertices,\n        faces = geometry2.faces,\n        facesOriginal = mesh.geometry.faces,\n        key;\n\n    for ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n        let face = faces[ i ];\n\n        for ( let j = 0; j < 3; j ++ ) {\n\n            edge[ 0 ] = face[ keys[ j ] ];\n            edge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n            edge.sort( sortFunction );\n\n            key = edge.toString();\n\n            if ( hash[ key ] === undefined ) {\n                hash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\n            } else {\n                hash[ key ].face2 = i;\n            }\n        }\n    }\n\n    let edges = [];\n\n    for ( key in hash ) {\n        let h = hash[ key ];\n        if ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot )\n        {\n            edges.push({\n                vertex1:vertices[ h.vert1 ],\n                vertex2:vertices[ h.vert2 ],\n                // face1:faces[ h.face1 ],\n                // face2:faces[ h.face2 ],\n                face1:facesOriginal[ h.face1 ],\n                face2:facesOriginal[ h.face2 ],\n                faceIndex1: h.face1,\n                faceIndex2: h.face2\n            });\n        }\n    }\n\n    return edges;\n}\n\nexport function addFragmentFogInjections(fragmentShader)\n{\n    let lines = fragmentShader.split('\\n'),\n        len = lines.length;\n\n    for(let i = 0; i < len; i++)\n    {\n        if(lines[i] === '/*#FOG_INJECTION_1#*/'){\n            lines[i] = THREE.ShaderChunk['fog_pars_fragment'];\n        }else if(lines[i] === '/*#FOG_INJECTION_2#*/'){\n            lines[i] = THREE.ShaderChunk['fog_fragment'];\n        }\n    }\n    return lines.join('\\n');\n}\n\nexport function pointOnSphere(r, a1, a2)\n{\n    return {\n        x: r * Math.cos(a1) * Math.sin(a2),\n        y: r * Math.sin(a1) * Math.sin(a2),\n        z: r * Math.cos(a2)\n    };\n}\n\nexport function getPointsOnSphere(n)\n{\n    let pts = [],\n        pt;\n\n    for(let i = 0; i < n; i++)\n    {\n        pt = pointOnSphere(1, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);\n        pts.push(new THREE.Vector3( pt.x, pt.y, pt.z ));\n    }\n\n    return pts;\n}\n\nexport function getPointsWithinSphere(n, maxRadius)\n{\n    let pts = [],\n        pt;\n\n    for(let i = 0; i < n; i++)\n    {\n        pt = pointOnSphere(Math.random() * maxRadius, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);\n        pts.push(new THREE.Vector3( pt.x, pt.y, pt.z ));\n    }\n\n    return pts;\n}\n\nexport function getPointsOnSphereEvenly(n)\n{\n    let pts = [],\n        inc = Math.PI * (3 - Math.sqrt(5)),\n        off = 2.0 / n,\n        x, y, z, r,\n        phi;\n\n    for (let k = 0; k < n; k++){\n        y = k * off - 1 + (off /2);\n        r = Math.sqrt(1 - y * y);\n        phi = k * inc;\n        x = Math.cos(phi) * r;\n        z = Math.sin(phi) * r;\n\n        pts.push(new THREE.Vector3( x, y, z ));\n    }\n    return pts;\n}\n\nexport function getRandomVector3(min, max)\n{\n    return new THREE.Vector3(randomRange(min, max), randomRange(min, max), randomRange(min, max));\n}\n\nexport function addRandomVector3(vec, min, max)\n{\n    return getRandomVector3(min, max).add(vec);\n}\n\nexport function rotationInDegrees(rotation)\n{\n    let degrees = 180 / Math.PI;\n    return new THREE.Euler(rotation.x * degrees, rotation.y * degrees, rotation.z * degrees, rotation.order);\n}\n\nexport function loadJSONGeometry(manifest, callback)\n{\n    let loader = new THREE.JSONLoader(),\n        len = manifest.length,\n        loaded = 0,\n        file,\n        id,\n        geometriesById = {}\n        geometries = [];\n\n    let load = function()\n    {\n        file = (manifest[loaded].file !== undefined) ? manifest[loaded].file : manifest[loaded];\n        id = (manifest[loaded].id !== undefined) ? manifest[loaded].id : null;\n        loader.load(file, function(g){\n            if(id)\n            {\n                geometriesById[id] = g;\n            }\n            geometries.push({geometry:g, id:id});\n            loaded++;\n            if(loaded === len)\n            {\n                if(typeof callback === 'function')\n                {\n                    callback(geometries, geometriesById);\n                }\n            }\n            else\n            {\n                load();\n            }\n        });\n    };\n\n    load();\n}\n\nexport function loadTextures(manifest, callback)\n{\n    let len = manifest.length,\n        loaded = 0,\n        file,\n        id,\n        texturesById = {}\n        textures = [],\n        loader = new THREE.TextureLoader();\n\n    loader.crossOrigin = \"\";\n\n    let load = function()\n    {\n        file = (manifest[loaded].file !== undefined) ? manifest[loaded].file : manifest[loaded];\n        id = (manifest[loaded].id !== undefined) ? manifest[loaded].id : null;\n\n        loader.load(file, function(tex){\n            if(id)\n            {\n                texturesById[id] = tex;\n            }\n            textures.push({texture:tex, id:id});\n            loaded++;\n            if(loaded === len)\n            {\n                if(typeof callback === 'function')\n                {\n                    callback(textures, texturesById);\n                }\n            }\n            else\n            {\n                load();\n            }\n        });\n\n        // THREE.ImageUtils.loadTexture(file, undefined, function(tex){\n        //     if(id)\n        //     {\n        //         texturesById[id] = tex;\n        //     }\n        //     textures.push({texture:tex, id:id});\n        //     loaded++;\n        //     if(loaded === len)\n        //     {\n        //         if(typeof callback === 'function')\n        //         {\n        //             callback(textures, texturesById);\n        //         }\n        //     }\n        //     else\n        //     {\n        //         load();\n        //     }\n        // });\n    };\n\n    load();\n}\n\nexport function setTextureWrapping(textures, wrapping)\n{\n    for(let i = 0; i < textures.length; i++)\n    {\n        textures[i].wrapS = textures[i].wrapT = wrapping;\n        textures[i].needsUpdate = true;\n    }\n}\n\nexport function setTextureMipmapping(textures, mipmapping)\n{\n    for(let i = 0; i < textures.length; i++)\n    {\n        textures[i].generateMipmaps = mipmapping;\n        textures[i].needsUpdate = true;\n    }\n}\n\nexport function setTextureMinMagFilters(textures, minFilter, magFilter)\n{\n    for(let i = 0; i < textures.length; i++)\n    {\n        if(minFilter)\n            textures[i].minFilter = minFilter;\n\n        if(magFilter)\n            textures[i].magFilter = magFilter;\n\n        textures[i].needsUpdate = true;\n    }\n}\n\nexport function injectShaderCode(original, key, injection)\n{\n    if(Object.prototype.toString.call(injection) === '[object Array]')\n    {\n        let replacement = '';\n        for(let i = 0; i < injection.length; i++)\n        {\n            replacement += injection[i] + '\\n';\n        }\n\n        return original.replace(key, replacement);\n    }\n    else\n    {\n        return original.replace(key, injection);\n    }\n}\n\nexport function logVector(vector)\n{\n    console.log(vector.x, vector.y, vector.z);\n}\n\n// usage: pass renderer.getContext() & mesh.material.program.program, call render at least once first.\nexport function logProgramInfo(gl, program) {\n    let result = {\n        attributes: [],\n        uniforms: [],\n        attributeCount: 0,\n        uniformCount: 0\n    }\n    activeUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS),\n    activeAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    // Taken from the WebGl spec:\n    // http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14\n    let enums = {\n        0x8B50: 'FLOAT_VEC2',\n        0x8B51: 'FLOAT_VEC3',\n        0x8B52: 'FLOAT_VEC4',\n        0x8B53: 'INT_VEC2',\n        0x8B54: 'INT_VEC3',\n        0x8B55: 'INT_VEC4',\n        0x8B56: 'BOOL',\n        0x8B57: 'BOOL_VEC2',\n        0x8B58: 'BOOL_VEC3',\n        0x8B59: 'BOOL_VEC4',\n        0x8B5A: 'FLOAT_MAT2',\n        0x8B5B: 'FLOAT_MAT3',\n        0x8B5C: 'FLOAT_MAT4',\n        0x8B5E: 'SAMPLER_2D',\n        0x8B60: 'SAMPLER_CUBE',\n        0x1400: 'BYTE',\n        0x1401: 'UNSIGNED_BYTE',\n        0x1402: 'SHORT',\n        0x1403: 'UNSIGNED_SHORT',\n        0x1404: 'INT',\n        0x1405: 'UNSIGNED_INT',\n        0x1406: 'FLOAT'\n    };\n\n    // Loop through active uniforms\n    for (let i=0; i < activeUniforms; i++) {\n        let uniform = gl.getActiveUniform(program, i);\n        uniform.typeName = enums[uniform.type];\n        result.uniforms.push(uniform);\n        result.uniformCount += uniform.size;\n    }\n\n    // Loop through active attributes\n    for (i=0; i < activeAttributes; i++) {\n        let attribute = gl.getActiveAttrib(program, i);\n        attribute.typeName = enums[attribute.type];\n        result.attributes.push(attribute);\n        result.attributeCount += attribute.size;\n    }\n\n    console.log(result);\n}\n","'use strict';\n\nexport function createElement(type, classNames, content){\n    type = type || 'div';\n    let el = document.createElement(type);\n    if(classNames){\n        classNames.forEach(function(name){\n            el.classList.add(name);\n        });\n    }\n    if(content) el.innerHTML = content;\n    return el;\n}\n\nexport function normalize(value, min, max) {\n    return (value - min) / (max - min);\n}\n\nexport function lerp(norm, min, max) {\n    return (max - min) * norm + min;\n}\n\nexport function map(value, sourceMin, sourceMax, destMin, destMax) {\n    return lerp(normalize(value, sourceMin, sourceMax), destMin, destMax);\n}\n\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, Math.min(min, max)), Math.max(min, max));\n}\n\nexport function distance(p0, p1) {\n    let dx = p1.x - p0.x,\n        dy = p1.y - p0.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function distanceXY(x0, y0, x1, y1) {\n    let dx = x1 - x0,\n        dy = y1 - y0;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function circleCollision(c0, c1) {\n    return distance(c0, c1) <= c0.radius + c1.radius;\n}\n\nexport function circlePointCollision(x, y, circle) {\n    return distanceXY(x, y, circle.x, circle.y) < circle.radius;\n}\n\nexport function pointInRect(x, y, rect) {\n    return inRange(x, rect.x, rect.x + rect.width) &&\n           inRange(y, rect.y, rect.y + rect.height);\n}\n\nexport function inRange(value, min, max) {\n    return value >= Math.min(min, max) && value <= Math.max(min, max);\n}\n\nexport function rangeIntersect(min0, max0, min1, max1) {\n    return Math.max(min0, max0) >= Math.min(min1, max1) &&\n           Math.min(min0, max0) <= Math.max(min1, max1);\n}\n\nexport function rectIntersect(r0, r1) {\n    return rangeIntersect(r0.x, r0.x + r0.width, r1.x, r1.x + r1.width) &&\n           rangeIntersect(r0.y, r0.y + r0.height, r1.y, r1.y + r1.height);\n}\n\nexport function degreesToRads(degrees) {\n    return degrees / 180 * Math.PI;\n}\n\nexport function radsToDegrees(radians) {\n    return radians * 180 / Math.PI;\n}\n\nexport function angleBetweenPoints(p1, p2){\n    return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n}\n\nexport function randomRange(min, max) {\n    return min + Math.random() * (max - min);\n}\n\nexport function randomInt(min, max) {\n    return Math.floor(min + Math.random() * (max - min + 1));\n}\n\nexport function roundToPlaces(value, places) {\n    let mult = Math.pow(10, places);\n    return Math.round(value * mult) / mult;\n}\n\nexport function roundNearest(value, nearest) {\n    return Math.round(value / nearest) * nearest;\n}\n\nexport function quadraticBezier(p0, p1, p2, t, pFinal) {\n    pFinal = pFinal || {};\n    pFinal.x = Math.pow(1 - t, 2) * p0.x +\n               (1 - t) * 2 * t * p1.x +\n               t * t * p2.x;\n    pFinal.y = Math.pow(1 - t, 2) * p0.y +\n               (1 - t) * 2 * t * p1.y +\n               t * t * p2.y;\n    return pFinal;\n}\n\nexport function cubicBezier(p0, p1, p2, p3, t, pFinal) {\n    pFinal = pFinal || {};\n    pFinal.x = Math.pow(1 - t, 3) * p0.x +\n               Math.pow(1 - t, 2) * 3 * t * p1.x +\n               (1 - t) * 3 * t * t * p2.x +\n               t * t * t * p3.x;\n    pFinal.y = Math.pow(1 - t, 3) * p0.y +\n               Math.pow(1 - t, 2) * 3 * t * p1.y +\n               (1 - t) * 3 * t * t * p2.y +\n               t * t * t * p3.y;\n    return pFinal;\n}\n\nexport function multicurve(points, context) {\n    let p0, p1, midx, midy;\n\n    context.moveTo(points[0].x, points[0].y);\n\n    for(let i = 1; i < points.length - 2; i += 1) {\n        p0 = points[i];\n        p1 = points[i + 1];\n        midx = (p0.x + p1.x) / 2;\n        midy = (p0.y + p1.y) / 2;\n        context.quadraticCurveTo(p0.x, p0.y, midx, midy);\n    }\n\n    p0 = points[points.length - 2];\n    p1 = points[points.length - 1];\n    context.quadraticCurveTo(p0.x, p0.y, p1.x, p1.y);\n}\n\nexport function pointOnSphere(r, a1, a2) {\n    return {\n        x: r * Math.cos(a1) * Math.sin(a2),\n        y: r * Math.sin(a1) * Math.sin(a2),\n        z: r * Math.cos(a2)\n    };\n}\n\nexport function getPointsOnSphere(n){\n    let pts = [],\n        pt;\n\n    for(let i = 0; i < n; i++)\n    {\n        pt = pointOnSphere(1, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);\n        pts.push({x:pt.x, y:pt.y, z:pt.z});\n    }\n\n    return pts;\n}\n\nexport function getPointsOnSphereEvenly(n){\n    let pts = [],\n        inc = Math.PI * (3 - Math.sqrt(5)),\n        off = 2.0 / n,\n        x, y, z, r,\n        phi;\n\n    for (let k = 0; k < n; k++){\n        y = k * off - 1 + (off /2);\n        r = Math.sqrt(1 - y * y);\n        phi = k * inc;\n        x = Math.cos(phi) * r;\n        z = Math.sin(phi) * r;\n\n        pts.push({x:x, y:y, z:z});\n    }\n    return pts;\n}\n\nexport function clone(obj){\n    return JSON.parse(JSON.stringify(obj));\n}\n\nexport function isArray(arg){\n    return Object.prototype.toString.call(arg) === '[object Array]';\n}\n\nexport function shuffleArray(array) {\n    let currentIndex = array.length,\n        temporaryValue,\n        randomIndex;\n\n    while (0 !== currentIndex)\n    {\n        randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex -= 1;\n        temporaryValue = array[currentIndex];\n        array[currentIndex] = array[randomIndex];\n        array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n}\n\nexport function thinOutArray(array, n){\n    let newArray = [],\n        len = array.length;\n\n    for(let i = 0; i < len; i += n)\n    {\n        newArray.push(array[i]);\n    }\n\n    return newArray;\n}\n\nexport function randomItemFromArray(array){\n    return array[Math.random() * array.length | 0];\n}\n\nexport function arrayRestrictedToRangeZ(array, minZ, maxZ){\n    let newArray = [],\n        len = array.length;\n\n    for(let i = 0; i < len; i++)\n    {\n        if(inRange(array[i].z, minZ, maxZ))\n            newArray.push(array[i]);\n    }\n\n    return newArray;\n}\n\nexport function extractKeyFromArray(array, key)\n{\n    let a = [];\n    for(let i = 0; i < array.length; i++)\n    {\n        a.push(array[i][key]);\n    }\n    return a;\n}\n\nexport function repeat(callback, params, intervals, delay, startDelay){\n    startDelay = startDelay || 0;\n    let i = 0;\n    let doStuff = function(){\n        setTimeout(function(){\n            callback(params);\n            i++;\n            if(i < intervals)\n                doStuff();\n        }, delay);\n    };\n    setTimeout(function(){\n        doStuff();\n    }, startDelay);\n}\n\nexport function isOpera(){\n    // Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)\n    return !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n}\n\nexport function isFirefox(){\n    // Firefox 1.0+\n    return typeof InstallTrigger !== 'undefined';\n}\n\nexport function isSafari(){\n    // At least Safari 3+: '[object HTMLElementConstructor]'\n    return Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n}\n\nexport function isChrome(){\n    // Chrome 1+\n    return !!window.chrome && !isOpera();\n}\n\nexport function isIE(){\n    // At least IE6\n    return false || !!document.documentMode;\n}\n\nexport function isMac() {\n    return navigator.platform.toLowerCase().indexOf('mac') > -1;\n}\n\nexport function isWindows() {\n    return navigator.platform.toLowerCase().indexOf('win') > -1;\n}\n\nexport function hasWebGL(){\n    if (!!window.WebGLRenderingContext) {\n        let canvas = document.createElement('canvas'),\n            names = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'],\n            context = false;\n\n        for(let i=0;i<4;i++) {\n            try {\n                context = canvas.getContext(names[i]);\n                if (context && typeof context.getParameter === 'function') {\n                    // WebGL is enabled\n                    return true;\n                }\n            } catch(e) {}\n        }\n        // WebGL is supported, but disabled\n        return false;\n    }\n    // WebGL not supported\n    return false;\n}\n\nexport function getVideoType(file)\n{\n    if(file.indexOf('.mp4') !== -1)\n        return 'video/mp4';\n    else if(file.indexOf('.webm') !== -1)\n        return 'video/webm';\n    else if(file.indexOf('.ogg') !== -1)\n        return 'video/ogg';\n}\n\nexport function dispatchEvent(eventName, config)\n{\n    config = config || null;\n\n    let event;\n\n    if(!isIE())\n    {\n        event = new CustomEvent(eventName, {\n            detail: config\n        });\n        document.dispatchEvent(event);\n    }\n    else\n    {\n        event = document.createEvent('CustomEvent');\n        event.initCustomEvent(eventName, true, false, config);\n        document.dispatchEvent(event);\n    }\n}\n\nexport function setCursor(cursor, element)\n{\n    element = element || document.body;\n\n    if(element.style.cursor !== cursor)\n    {\n        element.style.cursor = cursor;\n    }\n}\n\nexport function getParameterByName(name)\n{\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    let regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(location.search);\n    return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n"],"sourceRoot":"/source/"}